# 代码规范文档

## 1. 代码命名规范

### 1.1 变量命名
- **JavaScript/TypeScript**: 使用小驼峰命名法 (camelCase)
  ```javascript
  let userName = 'admin';
  let userAge = 25;
  let isLoggedIn = true;
  ```

- **CSS类名**: 使用短横线连接 (kebab-case)
  ```css
  .user-profile {}
  .nav-menu {}
  .btn-primary {}
  ```

- **HTML ID**: 使用短横线连接 (kebab-case)
  ```html
  <div id="user-profile"></div>
  <button id="submit-btn"></button>
  ```

### 1.2 常量命名
- 使用全大写字母，单词间用下划线分隔
  ```javascript
  const API_BASE_URL = 'https://api.example.com';
  const MAX_RETRY_COUNT = 3;
  const DEFAULT_TIMEOUT = 5000;
  ```

### 1.3 函数命名
- 使用小驼峰命名法，动词开头
  ```javascript
  function getUserInfo() {}
  function validateEmail() {}
  function calculateTotal() {}
  ```

### 1.4 类名命名
- 使用大驼峰命名法 (PascalCase)
  ```javascript
  class UserManager {}
  class ApiService {}
  class DatabaseConnection {}
  ```

## 2. 代码格式规范

### 2.1 缩进
- 统一使用 **4个空格** 进行缩进
- 禁止使用Tab字符

### 2.2 行长度
- 每行代码长度不超过 **120个字符**
- 超长行需要适当换行

### 2.3 空行使用
- 函数之间空一行
- 逻辑块之间空一行
- 文件末尾保留一个空行

### 2.4 括号使用
- 大括号采用 **K&R风格**
  ```javascript
  if (condition) {
      // 代码块
  } else {
      // 代码块
  }
  ```

## 3. 注释规范

### 3.1 函数注释
- 每个函数必须添加功能说明注释
  ```javascript
  /**
   * 获取用户信息
   * @param {string} userId - 用户ID
   * @param {boolean} includeProfile - 是否包含详细资料
   * @returns {Promise<Object>} 用户信息对象
   */
  function getUserInfo(userId, includeProfile = false) {
      // 函数实现
  }
  ```

### 3.2 复杂逻辑注释
- 复杂的业务逻辑必须添加说明注释
  ```javascript
  // 计算用户积分：基础积分 + 等级加成 + 活动奖励
  const totalPoints = basePoints + levelBonus + activityReward;
  ```

### 3.3 TODO注释
- 临时代码或待完善功能使用TODO标记
  ```javascript
  // TODO: 优化查询性能，添加缓存机制
  // FIXME: 修复在IE浏览器下的兼容性问题
  ```

## 4. 代码质量要求

### 4.1 避免冗余代码
- 重复逻辑必须封装为函数或组件
- 相似功能合并为通用方法

### 4.2 错误处理
- 所有异步操作必须包含错误处理
  ```javascript
  try {
      const result = await apiCall();
      return result;
  } catch (error) {
      console.error('API调用失败:', error);
      throw new Error('操作失败，请稍后重试');
  }
  ```

### 4.3 性能优化
- 避免在循环中进行DOM操作
- 合理使用缓存机制
- 图片资源进行压缩优化

## 5. 代码提交规范

### 5.1 提交前检查
- **语法检查**: 使用ESLint进行代码检查
- **格式化**: 使用Prettier统一代码格式
- **功能测试**: 确保新功能正常运行
- **回归测试**: 确保不影响现有功能

### 5.2 提交信息格式
```
类型(范围): 简短描述

详细描述（可选）

关联问题: #123
```

**提交类型说明:**
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建工具或辅助工具的变动

### 5.3 代码审查
- 所有代码提交前必须经过同事审查
- 审查重点：代码逻辑、性能、安全性、可维护性

## 6. 文件组织规范

### 6.1 目录结构
```
frontend/
├── assets/          # 静态资源
├── components/      # 可复用组件
├── pages/          # 页面文件
├── utils/          # 工具函数
├── services/       # API服务
└── styles/         # 样式文件
```

### 6.2 文件命名
- 组件文件使用大驼峰命名: `UserProfile.js`
- 工具文件使用小驼峰命名: `dateUtils.js`
- 样式文件使用短横线: `user-profile.css`

---

**文档版本**: v1.0  
**最后更新**: 2024年12月  
**维护人员**: 开发团队