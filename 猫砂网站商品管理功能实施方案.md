# çŒ«ç ‚ç½‘ç«™å•†å“ç®¡ç†åŠŸèƒ½å®æ–½æ–¹æ¡ˆ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

ä¸ºPawganicçŒ«ç ‚ç”µå•†ç½‘ç«™æ·»åŠ å®Œæ•´çš„å•†å“ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å‰ç«¯å•†å“å±•ç¤ºã€è´­ç‰©è½¦ã€è®¢å•ç®¡ç†ï¼Œä»¥åŠåå°ç®¡ç†ç³»ç»Ÿçš„å•†å“ç®¡ç†æ¨¡å—ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### å½“å‰æŠ€æœ¯æ ˆ
- **å‰ç«¯ç½‘ç«™**: WordPressé™æ€HTMLé¡µé¢ (è¿è¡Œåœ¨ http://localhost:8080)
- **åå°ç®¡ç†**: Vue3 + Element Plus (è¿è¡Œåœ¨ http://localhost:80)
- **åç«¯API**: NestJS + Prisma + MySQL (è¿è¡Œåœ¨ http://localhost:3000)
- **æ•°æ®åº“**: MySQL (meimei-prisma)
- **ç¼“å­˜**: Redis

### æ¶æ„è®¾è®¡åŸåˆ™
âœ… å‰ç«¯å•†å“å±•ç¤ºä¸åå°å•†å“ç®¡ç†åˆ†ç¦»
âœ… ä½¿ç”¨ç‹¬ç«‹çš„å•†å“ç›¸å…³æ•°æ®è¡¨
âœ… åˆ›å»ºç‹¬ç«‹çš„APIæ¨¡å— `product-management`
âœ… æ”¯æŒå•†å“åˆ†ç±»ã€åº“å­˜ã€ä»·æ ¼ç®¡ç†
âœ… æ”¯æŒè´­ç‰©è½¦å’Œè®¢å•åŠŸèƒ½

## ğŸ“ ç°æœ‰é¡µé¢åˆ†æ

### å‰ç«¯é¡µé¢ï¼ˆå…±21ä¸ªHTMLæ–‡ä»¶ï¼‰

#### 1. å•†å“ç›¸å…³é¡µé¢ï¼ˆ4ä¸ªï¼‰
- **`frontend/shop/index.html`** - å•†å“åˆ—è¡¨é¡µï¼ˆä¸»è¦å•†å“å±•ç¤ºé¡µï¼‰
- **`frontend/shop/-canvas_4_grid.html`** - å•†å“ç½‘æ ¼è§†å›¾
- **`frontend/shop/-canvas_4_list.html`** - å•†å“åˆ—è¡¨è§†å›¾
- **`frontend/shop/intelligent-marble-knife/index.html`** - å•†å“è¯¦æƒ…é¡µç¤ºä¾‹

#### 2. è´­ç‰©æµç¨‹é¡µé¢ï¼ˆ3ä¸ªï¼‰
- **`frontend/cart/index.html`** - è´­ç‰©è½¦é¡µé¢
- **`frontend/order-received/index.html`** - è®¢å•ç¡®è®¤é¡µé¢
- **`frontend/wishlist/index.html`** - å¿ƒæ„¿å•é¡µé¢

#### 3. ç”¨æˆ·ç›¸å…³é¡µé¢ï¼ˆ4ä¸ªï¼‰
- **`frontend/my-account/index.html`** - ç™»å½•/æˆ‘çš„è´¦æˆ·
- **`frontend/register/index.html`** - æ³¨å†Œé¡µé¢
- **`frontend/Personal-Center/index.html`** - ä¸ªäººä¸­å¿ƒ
- **`frontend/my-account/lost-password/index.html`** - æ‰¾å›å¯†ç 

#### 4. ä¿¡æ¯é¡µé¢ï¼ˆ10ä¸ªï¼‰
- **`frontend/index.html`** - é¦–é¡µï¼ˆä¸»é¡µï¼‰
- **`frontend/index1.html`** - å¤‡ç”¨é¦–é¡µ
- **`frontend/about-us/index.html`** - å…³äºæˆ‘ä»¬
- **`frontend/contact-us/index.html`** - è”ç³»æˆ‘ä»¬
- **`frontend/charity/index.html`** - æ…ˆå–„é¡µé¢
- **`frontend/pricing/index.html`** - ä»·æ ¼é¡µé¢
- **`frontend/faq/index.html`** - å¸¸è§é—®é¢˜
- **`frontend/senior-pets-how-much-to-feed-your-pet/index.html`** - å® ç‰©å–‚å…»æŒ‡å—
- **`frontend/understanding-pet-food-labels/index.html`** - å® ç‰©é£Ÿå“æ ‡ç­¾è¯´æ˜

### ç°æœ‰æ•°æ®ç»“æ„åˆ†æ

ä»HTMLé¡µé¢ä¸­æå–çš„å•†å“æ•°æ®ç»“æ„ï¼š

```javascript
// å•†å“å¯¹è±¡ç¤ºä¾‹ï¼ˆä» shop/intelligent-marble-knife/index.html æå–ï¼‰
{
  productId: 58,
  productName: "Intelligent Marble Knife",
  sku: "PT14Z61",
  price: 132.93,
  originalPrice: 134.27,
  discount: "-1%",
  mainImage: "../../wp-content/uploads/2021/11/16.jpg",
  images: [
    "../../wp-content/uploads/2021/11/16.jpg",
    "../../wp-content/uploads/2021/11/9.jpg",
    "../../wp-content/uploads/2021/11/4.jpg",
    "../../wp-content/uploads/2021/11/12.jpg"
  ],
  shortDescription: "Ipsam rerum modi eius impedit inventore doloribus non et. Sit consequuntur et dolore iure ducimus beatae quis.",
  availability: "In Stock",
  categories: ["Dry Food", "Uncategorized"],
  // æ³¨æ„ï¼šä¸åŒ…å«å“ç‰Œä¿¡æ¯
}

// è´­ç‰©è½¦é¡¹ç›®ï¼ˆä» cart/index.html æå–ï¼‰
{
  cartId: 1,
  customerId: 1,
  productId: 58,
  productName: "Intelligent Marble Knife",
  productImage: "../../wp-content/uploads/2021/11/16.jpg",
  quantity: 1,
  price: 132.93,
  subtotal: 132.93,
  stock: 100
}

// è®¢å•é¡¹ç›®ï¼ˆä» order-received/index.html æå–ï¼‰
{
  orderId: 1,
  orderNo: "ORD20251106001",
  customerId: 1,
  items: [
    {
      itemId: 1,
      productId: 58,
      productName: "Intelligent Marble Knife",
      productImage: "../../wp-content/uploads/2021/11/16-150x150.jpg",
      quantity: 2,
      price: 132.93,
      subtotal: 265.86
    }
  ],
  totalAmount: 265.86,
  shippingFee: 0,
  payAmount: 265.86,
  status: "0",  // 0-å¾…æ”¯ä»˜
  shippingAddress: {
    receiverName: "å¼ ä¸‰",
    receiverPhone: "13800138000",
    province: "åŒ—äº¬å¸‚",
    city: "åŒ—äº¬å¸‚",
    district: "æœé˜³åŒº",
    detailAddress: "æŸæŸè¡—é“123å·",
    postalCode: "100000"
  },
  createTime: "2025-11-06 10:30:00"
}
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

æœ¬æ–¹æ¡ˆå…±è®¾è®¡ **7å¼ æ•°æ®è¡¨**ï¼š

1. **product** - å•†å“è¡¨ï¼ˆæ ¸å¿ƒè¡¨ï¼‰
2. **product_category** - å•†å“åˆ†ç±»è¡¨ï¼ˆæ”¯æŒå¤šçº§åˆ†ç±»ï¼‰
3. **shopping_cart** - è´­ç‰©è½¦è¡¨
4. **customer_order** - è®¢å•è¡¨
5. **order_item** - è®¢å•æ˜ç»†è¡¨
6. **wishlist** - å¿ƒæ„¿å•è¡¨
7. **customer_address** - æ”¶è´§åœ°å€è¡¨ï¼ˆæ–°å¢ï¼‰

---

### 1. å•†å“è¡¨ (product)

```sql
CREATE TABLE `product` (
  `productId` INT NOT NULL AUTO_INCREMENT COMMENT 'å•†å“ID',
  `productName` VARCHAR(200) NOT NULL COMMENT 'å•†å“åç§°',
  `productCode` VARCHAR(100) DEFAULT NULL COMMENT 'å•†å“ç¼–ç (SKU)',
  `categoryId` INT DEFAULT NULL COMMENT 'åˆ†ç±»ID',
  `price` DECIMAL(10,2) NOT NULL COMMENT 'å”®ä»·',
  `originalPrice` DECIMAL(10,2) DEFAULT NULL COMMENT 'åŸä»·',
  `costPrice` DECIMAL(10,2) DEFAULT NULL COMMENT 'æˆæœ¬ä»·',
  `stock` INT DEFAULT 0 COMMENT 'åº“å­˜æ•°é‡',
  `unit` VARCHAR(20) DEFAULT 'ä»¶' COMMENT 'å•ä½',
  `weight` DECIMAL(10,2) DEFAULT NULL COMMENT 'é‡é‡(kg)',
  `volume` DECIMAL(10,2) DEFAULT NULL COMMENT 'ä½“ç§¯(mÂ³)',
  `mainImage` TEXT DEFAULT NULL COMMENT 'ä¸»å›¾(JSONå¯¹è±¡ï¼ŒåŒ…å«original/large/medium/small/thumbnail/webpç­‰å¤šå°ºå¯¸è·¯å¾„)',
  `images` TEXT DEFAULT NULL COMMENT 'å•†å“å›¾ç‰‡(JSONæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯åŒ…å«å¤šå°ºå¯¸è·¯å¾„çš„å¯¹è±¡)',
  `shortDescription` VARCHAR(500) DEFAULT NULL COMMENT 'ç®€çŸ­æè¿°',
  `description` TEXT DEFAULT NULL COMMENT 'è¯¦ç»†æè¿°',
  `specifications` TEXT DEFAULT NULL COMMENT 'è§„æ ¼å‚æ•°(JSON)',
  `tags` VARCHAR(500) DEFAULT NULL COMMENT 'æ ‡ç­¾',
  `status` CHAR(1) DEFAULT '0' COMMENT 'çŠ¶æ€ï¼š0-ä¸Šæ¶ï¼Œ1-ä¸‹æ¶',
  `isFeatured` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦ç²¾é€‰ï¼š0-å¦ï¼Œ1-æ˜¯',
  `isNew` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦æ–°å“ï¼š0-å¦ï¼Œ1-æ˜¯',
  `isHot` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦çƒ­é”€ï¼š0-å¦ï¼Œ1-æ˜¯',
  `displayPosition` VARCHAR(100) DEFAULT NULL COMMENT 'å±•ç¤ºä½ç½®ï¼šhome_featured(é¦–é¡µç²¾é€‰),shop_list(å•†å“åˆ—è¡¨),product_related(ç›¸å…³å•†å“),å¤šä¸ªç”¨é€—å·åˆ†éš”',
  `displayOrder` INT DEFAULT 0 COMMENT 'å±•ç¤ºé¡ºåºï¼ˆæ•°å­—è¶Šå°è¶Šé å‰ï¼‰',
  `viewCount` INT DEFAULT 0 COMMENT 'æµè§ˆæ¬¡æ•°',
  `salesCount` INT DEFAULT 0 COMMENT 'é”€å”®æ•°é‡',
  `rating` DECIMAL(3,2) DEFAULT 0.00 COMMENT 'è¯„åˆ†(0-5)',
  `reviewCount` INT DEFAULT 0 COMMENT 'è¯„è®ºæ•°é‡',
  `sort` INT DEFAULT 0 COMMENT 'æ’åº',
  `delFlag` CHAR(1) DEFAULT '0' COMMENT 'åˆ é™¤æ ‡å¿—ï¼š0-æœªåˆ é™¤ï¼Œ1-å·²åˆ é™¤',
  `createBy` VARCHAR(64) DEFAULT NULL COMMENT 'åˆ›å»ºè€…',
  `createTime` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updateBy` VARCHAR(64) DEFAULT NULL COMMENT 'æ›´æ–°è€…',
  `updateTime` DATETIME DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  PRIMARY KEY (`productId`),
  UNIQUE KEY `product_productCode_key` (`productCode`),
  KEY `idx_product_categoryId` (`categoryId`),
  KEY `idx_product_status` (`status`),
  KEY `idx_product_createTime` (`createTime`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å•†å“è¡¨';
```

### 2. å•†å“åˆ†ç±»è¡¨ (product_category)

```sql
CREATE TABLE `product_category` (
  `categoryId` INT NOT NULL AUTO_INCREMENT COMMENT 'åˆ†ç±»ID',
  `parentId` INT DEFAULT 0 COMMENT 'çˆ¶åˆ†ç±»IDï¼ˆ0è¡¨ç¤ºé¡¶çº§åˆ†ç±»ï¼‰',
  `categoryName` VARCHAR(100) NOT NULL COMMENT 'åˆ†ç±»åç§°',
  `categoryCode` VARCHAR(50) DEFAULT NULL COMMENT 'åˆ†ç±»ç¼–ç ',
  `icon` VARCHAR(200) DEFAULT NULL COMMENT 'åˆ†ç±»å›¾æ ‡',
  `image` VARCHAR(500) DEFAULT NULL COMMENT 'åˆ†ç±»å›¾ç‰‡',
  `sort` INT DEFAULT 0 COMMENT 'æ’åº',
  `level` INT DEFAULT 1 COMMENT 'å±‚çº§ï¼š1-ä¸€çº§ï¼Œ2-äºŒçº§ï¼Œ3-ä¸‰çº§',
  `status` CHAR(1) DEFAULT '0' COMMENT 'çŠ¶æ€ï¼š0-æ­£å¸¸ï¼Œ1-åœç”¨',
  `delFlag` CHAR(1) DEFAULT '0' COMMENT 'åˆ é™¤æ ‡å¿—ï¼š0-æœªåˆ é™¤ï¼Œ1-å·²åˆ é™¤',
  `createTime` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updateTime` DATETIME DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'å¤‡æ³¨',
  PRIMARY KEY (`categoryId`),
  KEY `idx_category_parentId` (`parentId`),
  KEY `idx_category_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å•†å“åˆ†ç±»è¡¨';
```

### 3. è´­ç‰©è½¦è¡¨ (shopping_cart)

```sql
CREATE TABLE `shopping_cart` (
  `cartId` INT NOT NULL AUTO_INCREMENT COMMENT 'è´­ç‰©è½¦ID',
  `customerId` INT NOT NULL COMMENT 'ç”¨æˆ·ID',
  `productId` INT NOT NULL COMMENT 'å•†å“ID',
  `quantity` INT NOT NULL DEFAULT 1 COMMENT 'æ•°é‡',
  `price` DECIMAL(10,2) NOT NULL COMMENT 'åŠ å…¥è´­ç‰©è½¦æ—¶çš„ä»·æ ¼',
  `selected` TINYINT DEFAULT 1 COMMENT 'æ˜¯å¦é€‰ä¸­ï¼š0-æœªé€‰ä¸­ï¼Œ1-é€‰ä¸­',
  `createTime` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updateTime` DATETIME DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`cartId`),
  KEY `idx_cart_customerId` (`customerId`),
  KEY `idx_cart_productId` (`productId`),
  UNIQUE KEY `cart_customer_product_key` (`customerId`, `productId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è´­ç‰©è½¦è¡¨';
```

### 4. è®¢å•è¡¨ (customer_order)

```sql
CREATE TABLE `customer_order` (
  `orderId` INT NOT NULL AUTO_INCREMENT COMMENT 'è®¢å•ID',
  `orderNo` VARCHAR(50) NOT NULL COMMENT 'è®¢å•å·',
  `customerId` INT NOT NULL COMMENT 'ç”¨æˆ·ID',
  `totalAmount` DECIMAL(10,2) NOT NULL COMMENT 'è®¢å•æ€»é‡‘é¢',
  `discountAmount` DECIMAL(10,2) DEFAULT 0.00 COMMENT 'ä¼˜æƒ é‡‘é¢',
  `shippingFee` DECIMAL(10,2) DEFAULT 0.00 COMMENT 'è¿è´¹',
  `payAmount` DECIMAL(10,2) NOT NULL COMMENT 'å®ä»˜é‡‘é¢',
  `payMethod` VARCHAR(20) DEFAULT NULL COMMENT 'æ”¯ä»˜æ–¹å¼',
  `payTime` DATETIME DEFAULT NULL COMMENT 'æ”¯ä»˜æ—¶é—´',
  `status` CHAR(1) DEFAULT '0' COMMENT 'è®¢å•çŠ¶æ€ï¼š0-å¾…æ”¯ä»˜ï¼Œ1-å·²æ”¯ä»˜ï¼Œ2-å·²å‘è´§ï¼Œ3-å·²å®Œæˆï¼Œ4-å·²å–æ¶ˆ',
  `shippingAddress` TEXT DEFAULT NULL COMMENT 'æ”¶è´§åœ°å€(JSON)',
  `remark` VARCHAR(500) DEFAULT NULL COMMENT 'è®¢å•å¤‡æ³¨',
  `createTime` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updateTime` DATETIME DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`orderId`),
  UNIQUE KEY `order_orderNo_key` (`orderNo`),
  KEY `idx_order_customerId` (`customerId`),
  KEY `idx_order_status` (`status`),
  KEY `idx_order_createTime` (`createTime`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è®¢å•è¡¨';
```

### 5. è®¢å•æ˜ç»†è¡¨ (order_item)

```sql
CREATE TABLE `order_item` (
  `itemId` INT NOT NULL AUTO_INCREMENT COMMENT 'è®¢å•æ˜ç»†ID',
  `orderId` INT NOT NULL COMMENT 'è®¢å•ID',
  `productId` INT NOT NULL COMMENT 'å•†å“ID',
  `productName` VARCHAR(200) NOT NULL COMMENT 'å•†å“åç§°',
  `productImage` VARCHAR(500) DEFAULT NULL COMMENT 'å•†å“å›¾ç‰‡',
  `price` DECIMAL(10,2) NOT NULL COMMENT 'å•†å“å•ä»·',
  `quantity` INT NOT NULL COMMENT 'è´­ä¹°æ•°é‡',
  `subtotal` DECIMAL(10,2) NOT NULL COMMENT 'å°è®¡é‡‘é¢',
  `createTime` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  PRIMARY KEY (`itemId`),
  KEY `idx_orderItem_orderId` (`orderId`),
  KEY `idx_orderItem_productId` (`productId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è®¢å•æ˜ç»†è¡¨';
```

### 6. å¿ƒæ„¿å•è¡¨ (wishlist)

```sql
CREATE TABLE `wishlist` (
  `wishlistId` INT NOT NULL AUTO_INCREMENT COMMENT 'å¿ƒæ„¿å•ID',
  `customerId` INT NOT NULL COMMENT 'ç”¨æˆ·ID',
  `productId` INT NOT NULL COMMENT 'å•†å“ID',
  `createTime` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  PRIMARY KEY (`wishlistId`),
  KEY `idx_wishlist_customerId` (`customerId`),
  KEY `idx_wishlist_productId` (`productId`),
  UNIQUE KEY `wishlist_customer_product_key` (`customerId`, `productId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å¿ƒæ„¿å•è¡¨';
```

### 7. æ”¶è´§åœ°å€è¡¨ (customer_address)

**ç”¨é€”**ï¼šå­˜å‚¨ç”¨æˆ·çš„æ”¶è´§åœ°å€ä¿¡æ¯ï¼ˆæ–°è¥¿å…°åœ°å€æ ¼å¼ï¼‰

```sql
CREATE TABLE `customer_address` (
  `addressId` INT NOT NULL AUTO_INCREMENT COMMENT 'åœ°å€ID',
  `customerId` INT NOT NULL COMMENT 'ç”¨æˆ·ID',
  `receiverName` VARCHAR(100) NOT NULL COMMENT 'æ”¶è´§äººå§“å',
  `receiverPhone` VARCHAR(20) NOT NULL COMMENT 'æ”¶è´§äººç”µè¯',
  `streetAddress` VARCHAR(200) NOT NULL COMMENT 'è¡—é“åœ°å€ï¼ˆStreet Addressï¼‰',
  `suburb` VARCHAR(100) DEFAULT NULL COMMENT 'éƒŠåŒº/åŒºåŸŸï¼ˆSuburbï¼‰',
  `city` VARCHAR(100) NOT NULL COMMENT 'åŸå¸‚ï¼ˆCityï¼‰',
  `region` VARCHAR(100) DEFAULT NULL COMMENT 'åœ°åŒºï¼ˆRegionï¼‰- å¦‚Auckland, Wellingtonç­‰',
  `postalCode` VARCHAR(10) NOT NULL COMMENT 'é‚®æ”¿ç¼–ç ï¼ˆPostcodeï¼‰',
  `country` VARCHAR(50) DEFAULT 'New Zealand' COMMENT 'å›½å®¶',
  `isDefault` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦é»˜è®¤åœ°å€ï¼š0-å¦ï¼Œ1-æ˜¯',
  `addressTag` VARCHAR(20) DEFAULT NULL COMMENT 'åœ°å€æ ‡ç­¾ï¼šHomeã€Workç­‰',
  `deliveryInstructions` TEXT DEFAULT NULL COMMENT 'é…é€è¯´æ˜ï¼ˆå¯é€‰ï¼‰',
  `delFlag` CHAR(1) DEFAULT '0' COMMENT 'åˆ é™¤æ ‡å¿—ï¼š0-æœªåˆ é™¤ï¼Œ1-å·²åˆ é™¤',
  `createTime` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updateTime` DATETIME DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`addressId`),
  KEY `idx_address_customerId` (`customerId`),
  KEY `idx_address_isDefault` (`isDefault`),
  KEY `idx_address_city` (`city`),
  KEY `idx_address_postalCode` (`postalCode`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ”¶è´§åœ°å€è¡¨ï¼ˆæ–°è¥¿å…°æ ¼å¼ï¼‰';
```

**æ–°è¥¿å…°åœ°å€æ ¼å¼è¯´æ˜**ï¼š
- **Street Address**ï¼šè¡—é“åœ°å€ï¼Œå¦‚ "123 Queen Street"
- **Suburb**ï¼šéƒŠåŒº/åŒºåŸŸï¼Œå¦‚ "Ponsonby", "Mount Eden"
- **City**ï¼šåŸå¸‚ï¼Œå¦‚ "Auckland", "Wellington", "Christchurch"
- **Region**ï¼šåœ°åŒºï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚ "Auckland Region", "Wellington Region"
- **Postcode**ï¼šé‚®æ”¿ç¼–ç ï¼Œ4ä½æ•°å­—ï¼Œå¦‚ "1010", "6011"
- **Delivery Instructions**ï¼šé…é€è¯´æ˜ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚ "Leave at front door", "Ring doorbell"

**ç¤ºä¾‹åœ°å€**ï¼š
```
John Smith
021 123 4567
123 Queen Street
Ponsonby
Auckland
Auckland Region
1011
New Zealand
```

## ğŸ”Œ åç«¯APIæ¥å£è®¾è®¡

### APIè·¯ç”±å‰ç¼€

- **å‰ç«¯å•†å“API**: `/api/frontend/product`
- **å‰ç«¯ç”¨æˆ·API**: `/api/frontend/customer`
- **åå°ç®¡ç†API**: `/system/product`

### è®¤è¯æœºåˆ¶

#### å‰ç«¯ç”¨æˆ·è®¤è¯
- **ä½¿ç”¨å®ˆå«**: `CustomerJwtAuthGuard`ï¼ˆå·²å­˜åœ¨äºé¡¹ç›®ä¸­ï¼‰
- **Tokenç±»å‹**: JWT Bearer Token
- **Tokenå­˜å‚¨**: Redisï¼ˆkey: `customer_token:{customerId}`ï¼‰
- **Tokenæœ‰æ•ˆæœŸ**: 7å¤©ï¼ˆå¯åœ¨configä¸­é…ç½®ï¼‰
- **Token payload**: `{ customerId, email, type: 'customer' }`

#### åå°ç®¡ç†å‘˜è®¤è¯
- **ä½¿ç”¨å®ˆå«**: `JwtAuthGuard`ï¼ˆå·²å­˜åœ¨äºé¡¹ç›®ä¸­ï¼‰
- **Tokenç±»å‹**: JWT Bearer Token
- **Tokenå­˜å‚¨**: Redisï¼ˆkey: `USER_TOKEN_KEY:{userId}`ï¼‰
- **Tokenæœ‰æ•ˆæœŸ**: 1å¹´ï¼ˆç”±Redisç®¡æ§å®é™…è¿‡æœŸæ—¶é—´ï¼‰
- **Token payload**: `{ userId, pv }`ï¼ˆpvä¸ºå¯†ç ç‰ˆæœ¬å·ï¼‰

### å‰ç«¯å•†å“APIæ¥å£

#### 1. è·å–å•†å“åˆ—è¡¨ï¼ˆåˆ†é¡µ+ç­›é€‰ï¼‰
```typescript
GET /api/frontend/product/list
Queryå‚æ•°:
  - pageNum: number (é¡µç ï¼Œé»˜è®¤1)
  - pageSize: number (æ¯é¡µæ•°é‡ï¼Œé»˜è®¤12)
  - categoryId?: number (åˆ†ç±»ID)
  - keyword?: string (æœç´¢å…³é”®è¯)
  - minPrice?: number (æœ€ä½ä»·æ ¼)
  - maxPrice?: number (æœ€é«˜ä»·æ ¼)
  - sortBy?: string (æ’åºå­—æ®µï¼šprice/sales/rating/createTime)
  - sortOrder?: string (æ’åºæ–¹å¼ï¼šasc/desc)
  - isFeatured?: boolean (æ˜¯å¦ç²¾é€‰)
  - isNew?: boolean (æ˜¯å¦æ–°å“)
  - isHot?: boolean (æ˜¯å¦çƒ­é”€)

Response:
{
  "code": 200,
  "msg": "æˆåŠŸ",
  "data": {
    "rows": [
      {
        "productId": 58,
        "productName": "Intelligent Marble Knife",
        "price": 132.93,
        "originalPrice": 221.55,
        "mainImage": "/uploads/2021/11/16.jpg",
        "shortDescription": "é«˜å“è´¨çŒ«ç ‚äº§å“",
        "stock": 100,
        "rating": 4.5,
        "reviewCount": 23,
        "salesCount": 156,
        "isFeatured": true,
        "isNew": false,
        "isHot": true
      }
    ],
    "total": 100
  }
}
```

#### 2. è·å–å•†å“è¯¦æƒ…
```typescript
GET /api/frontend/product/:productId

Response:
{
  "code": 200,
  "msg": "æˆåŠŸ",
  "data": {
    "productId": 58,
    "productName": "Intelligent Marble Knife",
    "productCode": "PT14Z61",
    "categoryId": 1,
    "categoryName": "çŒ«ç ‚",
    "price": 132.93,
    "originalPrice": 221.55,
    "stock": 100,
    "unit": "è¢‹",
    "weight": 5.0,
    "mainImage": "/uploads/2021/11/16.jpg",
    "images": [
      "/uploads/2021/11/16.jpg",
      "/uploads/2021/11/16-1.jpg"
    ],
    "shortDescription": "é«˜å“è´¨çŒ«ç ‚äº§å“",
    "description": "<p>è¯¦ç»†çš„å•†å“æè¿°HTMLå†…å®¹</p>",
    "specifications": {
      "æè´¨": "å¤©ç„¶è±†è…ç ‚",
      "é¢—ç²’å¤§å°": "2.5mm"
    },
    "tags": "ç¯ä¿,æ— å°˜,å¯å†²å•",
    "rating": 4.5,
    "reviewCount": 23,
    "salesCount": 156
  }
}
```

#### 3. è·å–å•†å“åˆ†ç±»æ ‘
```typescript
GET /api/frontend/product/category/tree

Response:
{
  "code": 200,
  "msg": "æˆåŠŸ",
  "data": [
    {
      "categoryId": 1,
      "categoryName": "çŒ«ç ‚",
      "children": [
        {
          "categoryId": 11,
          "categoryName": "è±†è…çŒ«ç ‚"
        }
      ]
    }
  ]
}
```

#### 4. æ·»åŠ åˆ°è´­ç‰©è½¦
```typescript
POST /api/frontend/product/cart/add
Headers:
  Authorization: Bearer {token}

Request Body:
{
  "productId": 58,
  "quantity": 2
}

Response:
{
  "code": 200,
  "msg": "æ·»åŠ æˆåŠŸ"
}
```

#### 5. è·å–è´­ç‰©è½¦åˆ—è¡¨
```typescript
GET /api/frontend/product/cart/list
Headers:
  Authorization: Bearer {token}

Response:
{
  "code": 200,
  "msg": "æˆåŠŸ",
  "data": [
    {
      "cartId": 1,
      "productId": 58,
      "productName": "Intelligent Marble Knife",
      "productImage": "/uploads/2021/11/16.jpg",
      "price": 132.93,
      "quantity": 2,
      "subtotal": 265.86,
      "stock": 100
    }
  ]
}
```

#### 6. è·å–æ”¶è´§åœ°å€åˆ—è¡¨
```typescript
GET /api/frontend/customer/address/list
Headers:
  Authorization: Bearer {token}

Response:
{
  "code": 200,
  "msg": "æˆåŠŸ",
  "data": [
    {
      "addressId": 1,
      "receiverName": "John Smith",
      "receiverPhone": "021 123 4567",
      "streetAddress": "123 Queen Street",
      "suburb": "Ponsonby",
      "city": "Auckland",
      "region": "Auckland Region",
      "postalCode": "1011",
      "country": "New Zealand",
      "isDefault": 1,
      "addressTag": "Home",
      "deliveryInstructions": "Leave at front door"
    }
  ]
}
```

#### 7. æ·»åŠ /ä¿®æ”¹æ”¶è´§åœ°å€
```typescript
POST /api/frontend/customer/address
Headers:
  Authorization: Bearer {token}

Request Body:
{
  "addressId": 1,  // ä¿®æ”¹æ—¶ä¼ å…¥ï¼Œæ–°å¢æ—¶ä¸ä¼ 
  "receiverName": "John Smith",
  "receiverPhone": "021 123 4567",
  "streetAddress": "123 Queen Street",
  "suburb": "Ponsonby",
  "city": "Auckland",
  "region": "Auckland Region",
  "postalCode": "1011",
  "country": "New Zealand",
  "isDefault": 1,
  "addressTag": "Home",
  "deliveryInstructions": "Leave at front door"
}

Response:
{
  "code": 200,
  "msg": "ä¿å­˜æˆåŠŸ"
}
```

#### 8. åˆ é™¤æ”¶è´§åœ°å€
```typescript
DELETE /api/frontend/customer/address/:addressId
Headers:
  Authorization: Bearer {token}

Response:
{
  "code": 200,
  "msg": "åˆ é™¤æˆåŠŸ"
}
```

#### 9. åˆ›å»ºè®¢å•
```typescript
POST /api/frontend/product/order/create
Headers:
  Authorization: Bearer {token}

Request Body:
{
  "cartIds": [1, 2, 3],
  "addressId": 1,  // ä½¿ç”¨å·²ä¿å­˜çš„åœ°å€ID
  "remark": "è¯·å°½å¿«å‘è´§"
}

Response:
{
  "code": 200,
  "msg": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "orderId": 1,
    "orderNo": "ORD20251106001",
    "payAmount": 531.72
  }
}
```

### åå°ç®¡ç†APIæ¥å£

#### 1. è·å–å•†å“åˆ—è¡¨ï¼ˆåå°ï¼‰
```typescript
GET /system/product/list
Headers:
  Authorization: Bearer {admin_token}
Queryå‚æ•°:
  - pageNum: number
  - pageSize: number
  - productName?: string
  - categoryId?: number
  - status?: string

Response:
{
  "code": 200,
  "msg": "æˆåŠŸ",
  "rows": [...],
  "total": 100
}
```

#### 2. æ–°å¢å•†å“
```typescript
POST /system/product
Headers:
  Authorization: Bearer {admin_token}

Request Body:
{
  "productName": "æ–°å•†å“åç§°",
  "productCode": "PRD-2024-002",
  "categoryId": 1,
  "price": 99.99,
  "stock": 100,
  "mainImage": "/uploads/product/main.jpg",
  "shortDescription": "ç®€çŸ­æè¿°",
  "status": "0"
}

Response:
{
  "code": 200,
  "msg": "æ–°å¢æˆåŠŸ"
}
```

#### 3. ä¿®æ”¹å•†å“
```typescript
PUT /system/product
Headers:
  Authorization: Bearer {admin_token}

Request Body:
{
  "productId": 58,
  "productName": "ä¿®æ”¹åçš„å•†å“åç§°"
}

Response:
{
  "code": 200,
  "msg": "ä¿®æ”¹æˆåŠŸ"
}
```

#### 4. åˆ é™¤å•†å“
```typescript
DELETE /system/product/:productId
Headers:
  Authorization: Bearer {admin_token}

Response:
{
  "code": 200,
  "msg": "åˆ é™¤æˆåŠŸ"
}
```

#### 5. æ‰¹é‡æ›´æ–°å•†å“ä½ç½®
```typescript
POST /system/product/position/batch
Headers:
  Authorization: Bearer {admin_token}

Request Body:
{
  "positions": [
    {
      "productId": 58,
      "displayPosition": "home_featured,shop_list",  // å¤šä¸ªä½ç½®ç”¨é€—å·åˆ†éš”
      "displayOrder": 1
    },
    {
      "productId": 56,
      "displayPosition": "home_featured,shop_list",
      "displayOrder": 2
    }
  ]
}

Response:
{
  "code": 200,
  "msg": "ä½ç½®æ›´æ–°æˆåŠŸ"
}
```

#### 6. è·å–æŒ‡å®šä½ç½®çš„å•†å“åˆ—è¡¨
```typescript
GET /system/product/position/:position
Headers:
  Authorization: Bearer {admin_token}
Queryå‚æ•°:
  - position: string (home_featured | shop_list | product_related)

Response:
{
  "code": 200,
  "msg": "æˆåŠŸ",
  "data": [
    {
      "productId": 58,
      "productName": "Intelligent Marble Knife",
      "mainImage": "/uploads/2021/11/16.jpg",
      "price": 132.93,
      "displayOrder": 1
    }
  ]
}
```

## ï¿½ Prisma Schemaå®šä¹‰

éœ€è¦åœ¨ `backend/meimei-prisma-vue3/meimei-admin/prisma/schema.prisma` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹æ¨¡å‹å®šä¹‰ï¼š

```prisma
/// å•†å“è¡¨
model Product {
  productId         Int       @id @default(autoincrement())
  productName       String    @db.VarChar(200)
  productCode       String    @unique @db.VarChar(50)
  categoryId        Int?
  price             Decimal   @db.Decimal(10, 2)
  originalPrice     Decimal?  @db.Decimal(10, 2)
  costPrice         Decimal?  @db.Decimal(10, 2)
  stock             Int       @default(0)
  unit              String?   @default("ä»¶") @db.VarChar(20)
  weight            Decimal?  @db.Decimal(10, 2)
  volume            Decimal?  @db.Decimal(10, 2)
  mainImage         String?   @db.Text  // JSONå¯¹è±¡ï¼š{original, large, medium, small, thumbnail, webp}
  images            String?   @db.Text  // JSONæ•°ç»„ï¼š[{original, large, medium, small, thumbnail, webp}, ...]
  shortDescription  String?   @db.VarChar(500)
  description       String?   @db.Text
  specifications    String?   @db.Text
  tags              String?   @db.VarChar(200)
  salesCount        Int       @default(0)
  viewCount         Int       @default(0)
  rating            Decimal?  @default(0) @db.Decimal(3, 2)
  reviewCount       Int       @default(0)
  isFeatured        Boolean   @default(false)
  isNew             Boolean   @default(false)
  isHot             Boolean   @default(false)
  displayPosition   String?   @db.VarChar(100)
  displayOrder      Int       @default(0)
  status            String    @default("0") @db.Char(1)
  delFlag           String    @default("0") @db.Char(1)
  createBy          String?   @db.VarChar(64)
  createTime        DateTime? @default(now())
  updateBy          String?   @db.VarChar(64)
  updateTime        DateTime? @updatedAt
  remark            String?   @db.VarChar(500)

  category          ProductCategory? @relation(fields: [categoryId], references: [categoryId])
  cartItems         ShoppingCart[]
  orderItems        OrderItem[]
  wishlistItems     Wishlist[]

  @@index([categoryId])
  @@index([status])
  @@index([displayPosition])
  @@index([displayOrder])
  @@map("product")
}

/// å•†å“åˆ†ç±»è¡¨
model ProductCategory {
  categoryId     Int       @id @default(autoincrement())
  categoryName   String    @db.VarChar(100)
  parentId       Int?      @default(0)
  orderNum       Int       @default(0)
  icon           String?   @db.VarChar(200)
  status         String    @default("0") @db.Char(1)
  delFlag        String    @default("0") @db.Char(1)
  createBy       String?   @db.VarChar(64)
  createTime     DateTime? @default(now())
  updateBy       String?   @db.VarChar(64)
  updateTime     DateTime? @updatedAt
  remark         String?   @db.VarChar(500)

  products       Product[]

  @@index([parentId])
  @@index([status])
  @@map("product_category")
}

/// è´­ç‰©è½¦è¡¨
model ShoppingCart {
  cartId         Int       @id @default(autoincrement())
  customerId     Int
  productId      Int
  quantity       Int       @default(1)
  createTime     DateTime? @default(now())
  updateTime     DateTime? @updatedAt

  customer       Customer  @relation(fields: [customerId], references: [customerId])
  product        Product   @relation(fields: [productId], references: [productId])

  @@index([customerId])
  @@index([productId])
  @@map("shopping_cart")
}

/// è®¢å•è¡¨
model CustomerOrder {
  orderId          Int       @id @default(autoincrement())
  orderNo          String    @unique @db.VarChar(50)
  customerId       Int
  totalAmount      Decimal   @db.Decimal(10, 2)
  shippingFee      Decimal   @default(0) @db.Decimal(10, 2)
  payAmount        Decimal   @db.Decimal(10, 2)
  payMethod        String?   @db.VarChar(20)
  payTime          DateTime?
  shippingAddress  String    @db.Text
  status           String    @default("0") @db.Char(1)
  remark           String?   @db.VarChar(500)
  createTime       DateTime? @default(now())
  updateTime       DateTime? @updatedAt

  customer         Customer  @relation(fields: [customerId], references: [customerId])
  orderItems       OrderItem[]

  @@index([customerId])
  @@index([orderNo])
  @@index([status])
  @@map("customer_order")
}

/// è®¢å•æ˜ç»†è¡¨
model OrderItem {
  itemId         Int       @id @default(autoincrement())
  orderId        Int
  productId      Int
  productName    String    @db.VarChar(200)
  productImage   String?   @db.VarChar(500)
  quantity       Int
  price          Decimal   @db.Decimal(10, 2)
  subtotal       Decimal   @db.Decimal(10, 2)

  order          CustomerOrder @relation(fields: [orderId], references: [orderId])
  product        Product       @relation(fields: [productId], references: [productId])

  @@index([orderId])
  @@index([productId])
  @@map("order_item")
}

/// å¿ƒæ„¿å•è¡¨
model Wishlist {
  wishlistId     Int       @id @default(autoincrement())
  customerId     Int
  productId      Int
  createTime     DateTime? @default(now())

  customer       Customer  @relation(fields: [customerId], references: [customerId])
  product        Product   @relation(fields: [productId], references: [productId])

  @@index([customerId])
  @@index([productId])
  @@map("wishlist")
}

/// æ”¶è´§åœ°å€è¡¨ï¼ˆæ–°è¥¿å…°æ ¼å¼ï¼‰
model CustomerAddress {
  addressId            Int       @id @default(autoincrement())
  customerId           Int
  receiverName         String    @db.VarChar(100)
  receiverPhone        String    @db.VarChar(20)
  streetAddress        String    @db.VarChar(200)
  suburb               String?   @db.VarChar(100)
  city                 String    @db.VarChar(100)
  region               String?   @db.VarChar(100)
  postalCode           String    @db.VarChar(10)
  country              String    @default("New Zealand") @db.VarChar(50)
  isDefault            Boolean   @default(false)
  addressTag           String?   @db.VarChar(20)
  deliveryInstructions String?   @db.Text
  delFlag              String    @default("0") @db.Char(1)
  createTime           DateTime? @default(now())
  updateTime           DateTime? @updatedAt

  customer             Customer  @relation(fields: [customerId], references: [customerId])

  @@index([customerId])
  @@index([isDefault])
  @@index([city])
  @@index([postalCode])
  @@map("customer_address")
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âœ… æ‰€æœ‰æ¨¡å‹éƒ½ä½¿ç”¨äº† `@@map` æŒ‡å®šæ•°æ®åº“è¡¨åï¼ˆè›‡å½¢å‘½åï¼‰
- âœ… æ‰€æœ‰å…³è”å…³ç³»éƒ½å·²å®šä¹‰ï¼ˆä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ï¼‰
- âœ… æ‰€æœ‰ç´¢å¼•éƒ½å·²æ·»åŠ ï¼ˆæé«˜æŸ¥è¯¢æ€§èƒ½ï¼‰
- âœ… Customeræ¨¡å‹å·²å­˜åœ¨äºé¡¹ç›®ä¸­ï¼Œéœ€è¦æ·»åŠ å…³è”å…³ç³»ï¼š
  ```prisma
  model Customer {
    // ... ç°æœ‰å­—æ®µ ...
    cartItems     ShoppingCart[]
    orders        CustomerOrder[]
    wishlistItems Wishlist[]
    addresses     CustomerAddress[]
  }
  ```

## ï¿½ğŸ’» å®æ–½æ­¥éª¤

### é˜¶æ®µä¸€ï¼šæ•°æ®åº“è®¾è®¡ä¸åˆ›å»ºï¼ˆ0.5å¤©ï¼‰

**ä»»åŠ¡æ¸…å•ï¼š**
- [ ] åœ¨Prisma Schemaä¸­æ·»åŠ 7ä¸ªæ–°æ¨¡å‹å®šä¹‰
- [ ] åœ¨Customeræ¨¡å‹ä¸­æ·»åŠ å…³è”å…³ç³»
- [ ] è¿è¡Œ `npx prisma format` æ ¼å¼åŒ–schemaæ–‡ä»¶
- [ ] è¿è¡Œ `npx prisma generate` ç”ŸæˆPrisma Client
- [ ] è¿è¡Œ `npx prisma db push` åŒæ­¥æ•°æ®åº“ç»“æ„ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- [ ] æˆ–è¿è¡Œ `npx prisma migrate dev --name add_product_tables` åˆ›å»ºè¿ç§»ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
- [ ] æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆå•†å“åˆ†ç±»ã€ç¤ºä¾‹å•†å“ã€æ”¶è´§åœ°å€ç­‰ï¼‰
- [ ] éªŒè¯è¡¨ç»“æ„å’Œç´¢å¼•

### é˜¶æ®µäºŒï¼šåç«¯APIå¼€å‘ï¼ˆ3-4å¤©ï¼‰

**ä»»åŠ¡æ¸…å•ï¼š**
- [ ] å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…
  - [ ] `npm install sharp uuid multer` - å›¾ç‰‡å¤„ç†å’Œæ–‡ä»¶ä¸Šä¼ 
  - [ ] `npm install @types/multer @types/uuid -D` - TypeScriptç±»å‹å®šä¹‰
- [ ] åˆ›å»ºPrisma Schemaå®šä¹‰ï¼ˆ7å¼ è¡¨ï¼‰
- [ ] ç”ŸæˆPrisma Client
- [ ] åˆ›å»ºå›¾ç‰‡ä¸Šä¼ æœåŠ¡æ¨¡å— â­ æ–°å¢
  - [ ] åˆ›å»º `upload.service.ts` - å¤„ç†æ–‡ä»¶ä¸Šä¼ 
  - [ ] åˆ›å»º `image-processor.service.ts` - ä½¿ç”¨sharpç”Ÿæˆå¤šå°ºå¯¸å›¾ç‰‡
  - [ ] é…ç½®æ–‡ä»¶ä¸Šä¼ æ‹¦æˆªå™¨ï¼ˆé™åˆ¶æ–‡ä»¶å¤§å°ã€ç±»å‹ï¼‰
  - [ ] å®ç°å›¾ç‰‡è‡ªåŠ¨å‹ç¼©å’Œæ ¼å¼è½¬æ¢ï¼ˆWebPï¼‰
- [ ] åˆ›å»ºå•†å“ç®¡ç†æ¨¡å— (product-management)
  - [ ] åˆ›å»ºDTOï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰
    - [ ] `CreateProductDto` - åŒ…å«å›¾ç‰‡éªŒè¯
    - [ ] `UpdateProductDto` - åŒ…å«å›¾ç‰‡éªŒè¯
    - [ ] `AddToCartDto` - è´­ç‰©è½¦DTO
    - [ ] `CreateOrderDto` - è®¢å•DTO
    - [ ] `CreateAddressDto` - åœ°å€DTOï¼ˆæ–°è¥¿å…°æ ¼å¼éªŒè¯ï¼‰
  - [ ] åˆ›å»ºServiceï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰
    - [ ] å®ç°æ•°æ®éš”ç¦»é€»è¾‘ï¼ˆcustomerIdéªŒè¯ï¼‰â­ é‡è¦
    - [ ] å®ç°åº“å­˜å¹¶å‘æ§åˆ¶ï¼ˆäº‹åŠ¡å¤„ç†ï¼‰
  - [ ] åˆ›å»ºControllerï¼ˆæ§åˆ¶å™¨å±‚ï¼‰
    - [ ] ä»JWT tokenè·å–customerIdï¼ˆä¸ä»è¯·æ±‚å‚æ•°è·å–ï¼‰â­ é‡è¦
  - [ ] æ·»åŠ JWTè®¤è¯å®ˆå«ï¼ˆå¤ç”¨ç°æœ‰çš„CustomerJwtAuthGuardï¼‰
- [ ] å®ç°å‰ç«¯å•†å“APIï¼ˆ9ä¸ªæ ¸å¿ƒæ¥å£ï¼‰
  - [ ] å•†å“åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åºã€ä½ç½®ç­›é€‰ï¼‰
  - [ ] å•†å“è¯¦æƒ…
  - [ ] åˆ†ç±»æ ‘
  - [ ] è´­ç‰©è½¦å¢åˆ æ”¹æŸ¥ï¼ˆå¸¦customerIdéš”ç¦»ï¼‰â­ é‡è¦
  - [ ] æ”¶è´§åœ°å€å¢åˆ æ”¹æŸ¥ï¼ˆæ–°è¥¿å…°æ ¼å¼ + customerIdéš”ç¦»ï¼‰â­ é‡è¦
  - [ ] è®¢å•åˆ›å»ºï¼ˆå¸¦customerIdéš”ç¦»ï¼‰â­ é‡è¦
- [ ] å®ç°åå°ç®¡ç†APIï¼ˆ6ä¸ªæ ¸å¿ƒæ¥å£ï¼‰
  - [ ] å•†å“åˆ—è¡¨ï¼ˆåå°ï¼‰
  - [ ] æ–°å¢å•†å“ï¼ˆå«å›¾ç‰‡ä¸Šä¼ ï¼‰
  - [ ] ä¿®æ”¹å•†å“ï¼ˆå«å›¾ç‰‡æ›´æ–°ï¼‰
  - [ ] åˆ é™¤å•†å“ï¼ˆè½¯åˆ é™¤ï¼‰
  - [ ] æ‰¹é‡æ›´æ–°å•†å“ä½ç½® â­ æ–°å¢
  - [ ] è·å–æŒ‡å®šä½ç½®çš„å•†å“åˆ—è¡¨ â­ æ–°å¢
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
  - [ ] æµ‹è¯•æ•°æ®éš”ç¦»é€»è¾‘
  - [ ] æµ‹è¯•å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
  - [ ] æµ‹è¯•åº“å­˜å¹¶å‘æ§åˆ¶
- [ ] APIæ–‡æ¡£ç”Ÿæˆï¼ˆSwaggerï¼‰

### é˜¶æ®µä¸‰ï¼šå‰ç«¯å•†å“å±•ç¤ºï¼ˆ2-3å¤©ï¼‰âœ… **å·²å®Œæˆ**

**ä»»åŠ¡æ¸…å•ï¼š**
- [x] åˆ›å»ºapi.jsæœåŠ¡æ–‡ä»¶ï¼ˆå°è£…æ‰€æœ‰å•†å“ç›¸å…³APIè°ƒç”¨ï¼‰âœ… å·²å®Œæˆ
- [x] ä¿®æ”¹é¦–é¡µ (index.html) âœ… å·²å®Œæˆ
  - [x] ä»åç«¯APIè·å–é¦–é¡µç²¾é€‰å•†å“ï¼ˆdisplayPosition=home_featuredï¼Œæœ€å¤š4ä¸ªï¼‰
  - [x] åŠ¨æ€æ¸²æŸ“Featured productsåŒºåŸŸçš„å•†å“å¡ç‰‡
  - [x] å®ç°"Add to cart"æŒ‰é’®åŠŸèƒ½
  - [x] å®ç°"Add to wishlist"æŒ‰é’®åŠŸèƒ½
- [x] ä¿®æ”¹å•†å“åˆ—è¡¨é¡µé¢ (shop/index.html) âœ… å·²å®Œæˆ
  - [x] ä»åç«¯APIè·å–å•†å“åˆ—è¡¨æ•°æ®ï¼ˆdisplayPosition=shop_listï¼‰
  - [x] åŠ¨æ€æ¸²æŸ“å•†å“å¡ç‰‡
  - [x] å®ç°"Add to cart"æŒ‰é’®åŠŸèƒ½ï¼ˆè°ƒç”¨è´­ç‰©è½¦APIï¼‰
  - [x] å®ç°"Add to wishlist"æŒ‰é’®åŠŸèƒ½
  - [x] å®ç°å•†å“åˆ†é¡µåŠ è½½
  - [x] å®ç°å•†å“æ’åºï¼ˆæŒ‰ä»·æ ¼ã€é”€é‡ã€è¯„åˆ†ç­‰ï¼‰
- [x] ä¿®æ”¹å•†å“è¯¦æƒ…é¡µé¢ (shop/intelligent-marble-knife/index.html) âœ… å·²å®Œæˆ
  - [x] ä»åç«¯APIè·å–å•†å“è¯¦æƒ…æ•°æ®
  - [x] åŠ¨æ€æ¸²æŸ“å•†å“ä¿¡æ¯ï¼ˆåç§°ã€ä»·æ ¼ã€å›¾ç‰‡ã€æè¿°ç­‰ï¼‰
  - [x] å®ç°"Add to cart"æŒ‰é’®åŠŸèƒ½
  - [x] å®ç°æ•°é‡é€‰æ‹©å™¨
  - [x] å®ç°å›¾ç‰‡ç”»å»Šåˆ‡æ¢
  - [x] ä»åç«¯APIè·å–ç›¸å…³å•†å“ï¼ˆdisplayPosition=product_relatedï¼Œæœ€å¤š4ä¸ªï¼‰
  - [x] åŠ¨æ€æ¸²æŸ“Related productsåŒºåŸŸçš„å•†å“å¡ç‰‡
- [x] å®ç°è´­ç‰©è½¦åŠŸèƒ½ (cart/index.html) âœ… å·²å®Œæˆ
  - [x] ä»åç«¯APIè·å–è´­ç‰©è½¦æ•°æ®
  - [x] å®ç°å•†å“æ•°é‡ä¿®æ”¹
  - [x] å®ç°å•†å“åˆ é™¤åŠŸèƒ½
  - [x] å®æ—¶è®¡ç®—æ€»ä»·
  - [x] æ›´æ–°é¡¶éƒ¨è´­ç‰©è½¦å¾½ç« æ•°å­—
- [x] å®ç°å¿ƒæ„¿å•åŠŸèƒ½ (wishlist/index.html) âœ… å·²å®Œæˆ
  - [x] ä»åç«¯APIè·å–å¿ƒæ„¿å•æ•°æ®
  - [x] å®ç°ç§»é™¤å¿ƒæ„¿å•å•†å“
  - [x] å®ç°ä»å¿ƒæ„¿å•æ·»åŠ åˆ°è´­ç‰©è½¦
- [x] å®ç°è®¢å•åŠŸèƒ½ (order-received/index.html) âœ… å·²å®Œæˆ
  - [x] å®ç°æ”¶è´§åœ°å€ç®¡ç†ï¼ˆæ–°è¥¿å…°æ ¼å¼ï¼šStreet Addressã€Suburbã€Cityã€Regionã€Postcodeï¼‰
  - [x] å®ç°è®¢å•åˆ›å»º
  - [x] æ˜¾ç¤ºè®¢å•è¯¦æƒ…ï¼ˆå«æ–°è¥¿å…°åœ°å€æ ¼å¼ï¼‰
- [ ] æ·»åŠ å•†å“æœç´¢åŠŸèƒ½ï¼ˆé¡¶éƒ¨æœç´¢æ¡†ï¼‰âš ï¸ å¾…å®ç°
- [ ] æ·»åŠ å•†å“ç­›é€‰åŠŸèƒ½ï¼ˆåˆ†ç±»ã€ä»·æ ¼èŒƒå›´ç­‰ï¼‰âš ï¸ å¾…å®ç°

**å·²åˆ›å»ºçš„æ–‡ä»¶ï¼š**
- âœ… `frontend/assets/js/api.js` - ç»Ÿä¸€APIæœåŠ¡ï¼ˆ31ä¸ªAPIæ–¹æ³•ï¼‰
- âœ… `frontend/assets/js/home-products.js` - é¦–é¡µç²¾é€‰å•†å“åŠ¨æ€åŠ è½½
- âœ… `frontend/assets/js/product-detail.js` - å•†å“è¯¦æƒ…é¡µåŠ¨æ€åŠ è½½
- âœ… `frontend/assets/js/cart.js` - è´­ç‰©è½¦é¡µé¢åŠ¨æ€åŠ è½½
- âœ… `frontend/assets/js/shop-list.js` - å•†å“åˆ—è¡¨é¡µåŠ¨æ€åŠ è½½
- âœ… `frontend/assets/js/wishlist.js` - å¿ƒæ„¿å•é¡µé¢åŠ¨æ€åŠ è½½
- âœ… `frontend/assets/js/order.js` - è®¢å•å’Œåœ°å€ç®¡ç†

**å·²ä¿®æ”¹çš„HTMLé¡µé¢ï¼š**
- âœ… `frontend/index.html` - æ·»åŠ home-products.jså¼•ç”¨
- âœ… `frontend/shop/intelligent-marble-knife/index.html` - æ·»åŠ product-detail.jså¼•ç”¨
- âœ… `frontend/cart/index.html` - æ·»åŠ cart.jså¼•ç”¨
- âœ… `frontend/shop/index.html` - æ·»åŠ shop-list.jså¼•ç”¨
- âœ… `frontend/wishlist/index.html` - æ·»åŠ wishlist.jså¼•ç”¨
- âœ… `frontend/order-received/index.html` - æ·»åŠ order.jså¼•ç”¨

**Gitæäº¤è®°å½•ï¼š**
- âœ… Commit 1: å®ç°é¦–é¡µç²¾é€‰å•†å“åŠ¨æ€åŠ è½½åŠŸèƒ½
- âœ… Commit 2: å®ç°å•†å“è¯¦æƒ…é¡µåŠ¨æ€åŠ è½½åŠŸèƒ½
- âœ… Commit 3: å®Œæˆé˜¶æ®µå››ï¼šå‰ç«¯é¡µé¢é›†æˆï¼ˆè´­ç‰©è½¦ã€å•†å“åˆ—è¡¨ã€å¿ƒæ„¿å•ã€è®¢å•ï¼‰

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ **å‰ç«¯ä¸æä¾›å•†å“çš„æ·»åŠ /åˆ é™¤åŠŸèƒ½** - å•†å“çš„å¢åˆ æ”¹åªèƒ½åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­è¿›è¡Œ
- âœ… **å‰ç«¯åªæä¾›å•†å“çš„æµè§ˆå’Œè´­ä¹°åŠŸèƒ½** - åŒ…æ‹¬æŸ¥çœ‹å•†å“ã€åŠ å…¥è´­ç‰©è½¦ã€åŠ å…¥å¿ƒæ„¿å•ã€ä¸‹å•ç­‰
- âœ… **è´­ç‰©è½¦ä¸­çš„"åˆ é™¤"æ˜¯æŒ‡ä»è´­ç‰©è½¦ç§»é™¤å•†å“** - ä¸æ˜¯åˆ é™¤å•†å“æœ¬èº«
- âœ… **ä¸‰ä¸ªå±•ç¤ºä½ç½®çš„å•†å“ç”±åå°ç®¡ç†å‘˜é…ç½®** - é¦–é¡µç²¾é€‰ã€å•†å“åˆ—è¡¨ã€ç›¸å…³å•†å“

### é˜¶æ®µå››ï¼šåå°ç®¡ç†é¡µé¢ï¼ˆ2-3å¤©ï¼‰

**ä»»åŠ¡æ¸…å•ï¼š**
- [ ] åˆ›å»ºå•†å“ç®¡ç†èœå•
- [ ] å•†å“åˆ—è¡¨é¡µé¢ï¼ˆå«æœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰
- [ ] å•†å“æ–°å¢é¡µé¢ï¼ˆå«å›¾ç‰‡ä¸Šä¼ ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€ä½ç½®ç®¡ç†ï¼‰
- [ ] å•†å“ç¼–è¾‘é¡µé¢ï¼ˆå«å›¾ç‰‡ä¸Šä¼ ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€ä½ç½®ç®¡ç†ï¼‰
- [ ] å•†å“åˆ é™¤åŠŸèƒ½ï¼ˆå«æ‰¹é‡åˆ é™¤ï¼‰
- [ ] å•†å“åˆ†ç±»ç®¡ç†é¡µé¢ï¼ˆæ ‘å½¢ç»“æ„ï¼‰
- [ ] **å•†å“ä½ç½®ç®¡ç†é¡µé¢** â­ æ–°å¢
  - [ ] é¦–é¡µç²¾é€‰å•†å“ç®¡ç†ï¼ˆæœ€å¤š4ä¸ªï¼‰
  - [ ] ç›¸å…³å•†å“ç®¡ç†ï¼ˆæœ€å¤š4ä¸ªï¼‰
  - [ ] å•†å“åˆ—è¡¨æ’åºç®¡ç†
  - [ ] å•†å“é€‰æ‹©å™¨ï¼ˆå¼¹çª—é€‰æ‹©ï¼‰
  - [ ] æ‹–æ‹½æ’åºåŠŸèƒ½
- [ ] è®¢å•ç®¡ç†é¡µé¢ï¼ˆå«æ–°è¥¿å…°åœ°å€æ˜¾ç¤ºï¼‰
- [ ] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼ˆæ”¯æŒå¤šå›¾ä¸Šä¼ ï¼‰

### é˜¶æ®µäº”ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ1-2å¤©ï¼‰

**ä»»åŠ¡æ¸…å•ï¼š**
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å®‰å…¨æµ‹è¯•
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–

---

## ğŸ›ï¸ åå°ç®¡ç†é¡µé¢è¯¦ç»†è®¾è®¡

### 1. å•†å“ç®¡ç†èœå•ç»“æ„

```
å•†å“ç®¡ç†
â”œâ”€â”€ å•†å“åˆ—è¡¨      /system/product/list
â”œâ”€â”€ æ–°å¢å•†å“      /system/product/add
â”œâ”€â”€ å•†å“åˆ†ç±»      /system/product/category
â”œâ”€â”€ å•†å“ä½ç½®ç®¡ç†  /system/product/position
â””â”€â”€ è®¢å•ç®¡ç†      /system/order/list
```

**å•†å“ä½ç½®ç®¡ç†è¯´æ˜**ï¼š
- **é¦–é¡µç²¾é€‰å•†å“** (`home_featured`): é¦–é¡µ Featured products åŒºåŸŸå±•ç¤ºçš„4ä¸ªå•†å“
- **å•†å“åˆ—è¡¨** (`shop_list`): å•†å“åˆ—è¡¨é¡µé¢å±•ç¤ºçš„æ‰€æœ‰å•†å“
- **ç›¸å…³å•†å“** (`product_related`): å•†å“è¯¦æƒ…é¡µä¸‹æ–¹ Related products åŒºåŸŸå±•ç¤ºçš„4ä¸ªå•†å“

### 2. å•†å“åˆ—è¡¨é¡µé¢

**é¡µé¢è·¯å¾„**: `/system/product/list`

**åŠŸèƒ½æ¨¡å—**:
- âœ… **æœç´¢æ **: å•†å“åç§°ã€å•†å“ç¼–ç (SKU)æœç´¢
- âœ… **ç­›é€‰å™¨**:
  - å•†å“åˆ†ç±»ï¼ˆä¸‹æ‹‰æ ‘å½¢é€‰æ‹©ï¼‰
  - å•†å“çŠ¶æ€ï¼ˆä¸Šæ¶/ä¸‹æ¶ï¼‰
  - æ˜¯å¦ç²¾é€‰/æ–°å“/çƒ­é”€
  - åˆ›å»ºæ—¶é—´èŒƒå›´
- âœ… **æ“ä½œæŒ‰é’®**:
  - æ–°å¢å•†å“ï¼ˆè·³è½¬åˆ°æ–°å¢é¡µé¢ï¼‰
  - æ‰¹é‡åˆ é™¤ï¼ˆé€‰ä¸­å¤šä¸ªå•†å“ååˆ é™¤ï¼‰
  - æ‰¹é‡ä¸Šæ¶/ä¸‹æ¶
  - å¯¼å‡ºExcel
- âœ… **è¡¨æ ¼åˆ—**:
  - å•†å“ID
  - å•†å“å›¾ç‰‡ï¼ˆç¼©ç•¥å›¾ï¼‰
  - å•†å“åç§°
  - SKUç¼–ç 
  - åˆ†ç±»
  - ä»·æ ¼/åŸä»·
  - åº“å­˜
  - é”€é‡
  - çŠ¶æ€ï¼ˆä¸Šæ¶/ä¸‹æ¶ï¼‰
  - åˆ›å»ºæ—¶é—´
  - æ“ä½œï¼ˆç¼–è¾‘/åˆ é™¤/æŸ¥çœ‹ï¼‰
- âœ… **åˆ†é¡µ**: æ¯é¡µ10/20/50æ¡å¯é€‰

**é¡µé¢ç¤ºä¾‹ä»£ç ç»“æ„**:
```vue
<template>
  <div class="product-list">
    <!-- æœç´¢æ  -->
    <el-form :inline="true" :model="queryParams">
      <el-form-item label="å•†å“åç§°">
        <el-input v-model="queryParams.productName" placeholder="è¯·è¾“å…¥å•†å“åç§°" />
      </el-form-item>
      <el-form-item label="å•†å“åˆ†ç±»">
        <el-tree-select v-model="queryParams.categoryId" :data="categoryTree" />
      </el-form-item>
      <el-form-item label="å•†å“çŠ¶æ€">
        <el-select v-model="queryParams.status">
          <el-option label="å…¨éƒ¨" value="" />
          <el-option label="ä¸Šæ¶" value="0" />
          <el-option label="ä¸‹æ¶" value="1" />
        </el-select>
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="handleQuery">æœç´¢</el-button>
        <el-button @click="resetQuery">é‡ç½®</el-button>
      </el-form-item>
    </el-form>

    <!-- æ“ä½œæŒ‰é’® -->
    <el-row :gutter="10" class="mb8">
      <el-col :span="1.5">
        <el-button type="primary" icon="Plus" @click="handleAdd">æ–°å¢å•†å“</el-button>
      </el-col>
      <el-col :span="1.5">
        <el-button type="danger" icon="Delete" @click="handleBatchDelete">æ‰¹é‡åˆ é™¤</el-button>
      </el-col>
    </el-row>

    <!-- å•†å“è¡¨æ ¼ -->
    <el-table :data="productList" @selection-change="handleSelectionChange">
      <el-table-column type="selection" width="55" />
      <el-table-column label="å•†å“å›¾ç‰‡" width="100">
        <template #default="scope">
          <el-image :src="scope.row.mainImage" style="width: 60px; height: 60px" />
        </template>
      </el-table-column>
      <el-table-column label="å•†å“åç§°" prop="productName" />
      <el-table-column label="SKU" prop="productCode" />
      <el-table-column label="åˆ†ç±»" prop="categoryName" />
      <el-table-column label="ä»·æ ¼" prop="price" />
      <el-table-column label="åº“å­˜" prop="stock" />
      <el-table-column label="çŠ¶æ€">
        <template #default="scope">
          <el-tag :type="scope.row.status === '0' ? 'success' : 'danger'">
            {{ scope.row.status === '0' ? 'ä¸Šæ¶' : 'ä¸‹æ¶' }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column label="æ“ä½œ" width="200">
        <template #default="scope">
          <el-button type="primary" link @click="handleEdit(scope.row)">ç¼–è¾‘</el-button>
          <el-button type="danger" link @click="handleDelete(scope.row)">åˆ é™¤</el-button>
        </template>
      </el-table-column>
    </el-table>

    <!-- åˆ†é¡µ -->
    <pagination
      v-model:page="queryParams.pageNum"
      v-model:limit="queryParams.pageSize"
      :total="total"
      @pagination="getList"
    />
  </div>
</template>
```

### 3. å•†å“æ–°å¢/ç¼–è¾‘é¡µé¢

**é¡µé¢è·¯å¾„**: `/system/product/add` æˆ– `/system/product/edit/:id`

**è¡¨å•å­—æ®µ**:

**åŸºæœ¬ä¿¡æ¯**:
- å•†å“åç§° *ï¼ˆå¿…å¡«ï¼‰
- å•†å“ç¼–ç (SKU) *ï¼ˆå¿…å¡«ï¼Œå”¯ä¸€ï¼‰
- å•†å“åˆ†ç±» *ï¼ˆå¿…å¡«ï¼Œæ ‘å½¢é€‰æ‹©ï¼‰
- å•†å“æ ‡ç­¾ï¼ˆå¤šé€‰ï¼‰

**ä»·æ ¼åº“å­˜**:
- å”®ä»· *ï¼ˆå¿…å¡«ï¼‰
- åŸä»·
- æˆæœ¬ä»·
- åº“å­˜æ•°é‡ *ï¼ˆå¿…å¡«ï¼‰
- å•ä½ï¼ˆé»˜è®¤"ä»¶"ï¼‰
- é‡é‡(kg)
- ä½“ç§¯(mÂ³)

**å•†å“å›¾ç‰‡**:
- ä¸»å›¾ä¸Šä¼  *ï¼ˆå¿…å¡«ï¼Œå•å¼ ï¼‰
- å•†å“å›¾ç‰‡ï¼ˆå¤šå›¾ä¸Šä¼ ï¼Œæœ€å¤š8å¼ ï¼‰

**å•†å“æè¿°**:
- ç®€çŸ­æè¿°ï¼ˆ500å­—ä»¥å†…ï¼‰
- è¯¦ç»†æè¿° *ï¼ˆå¿…å¡«ï¼Œå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰

**å•†å“å±æ€§**:
- è§„æ ¼å‚æ•°ï¼ˆJSONç¼–è¾‘å™¨æˆ–åŠ¨æ€è¡¨å•ï¼‰
- æ˜¯å¦ç²¾é€‰
- æ˜¯å¦æ–°å“
- æ˜¯å¦çƒ­é”€

**å…¶ä»–**:
- å•†å“çŠ¶æ€ï¼ˆä¸Šæ¶/ä¸‹æ¶ï¼‰

**å±•ç¤ºä½ç½®** â­ æ–°å¢:
- å±•ç¤ºä½ç½®ï¼ˆå¤šé€‰ï¼‰:
  - â˜‘ é¦–é¡µç²¾é€‰å•†å“ (home_featured) - æœ€å¤šé€‰4ä¸ªå•†å“
  - â˜‘ å•†å“åˆ—è¡¨ (shop_list) - é»˜è®¤æ‰€æœ‰å•†å“
  - â˜‘ ç›¸å…³å•†å“ (product_related) - æœ€å¤šé€‰4ä¸ªå•†å“
- å±•ç¤ºé¡ºåºï¼ˆæ•°å­—ï¼Œè¶Šå°è¶Šé å‰ï¼‰
- æ’åºå€¼
- å¤‡æ³¨

**é¡µé¢ç¤ºä¾‹ä»£ç ç»“æ„**:
```vue
<template>
  <div class="product-form">
    <el-form ref="formRef" :model="form" :rules="rules" label-width="120px">
      <!-- åŸºæœ¬ä¿¡æ¯ -->
      <el-divider content-position="left">åŸºæœ¬ä¿¡æ¯</el-divider>
      <el-form-item label="å•†å“åç§°" prop="productName">
        <el-input v-model="form.productName" placeholder="è¯·è¾“å…¥å•†å“åç§°" />
      </el-form-item>
      <el-form-item label="å•†å“ç¼–ç " prop="productCode">
        <el-input v-model="form.productCode" placeholder="è¯·è¾“å…¥SKUç¼–ç " />
      </el-form-item>
      <el-form-item label="å•†å“åˆ†ç±»" prop="categoryId">
        <el-tree-select v-model="form.categoryId" :data="categoryTree" />
      </el-form-item>

      <!-- ä»·æ ¼åº“å­˜ -->
      <el-divider content-position="left">ä»·æ ¼åº“å­˜</el-divider>
      <el-form-item label="å”®ä»·" prop="price">
        <el-input-number v-model="form.price" :min="0" :precision="2" />
      </el-form-item>
      <el-form-item label="åŸä»·" prop="originalPrice">
        <el-input-number v-model="form.originalPrice" :min="0" :precision="2" />
      </el-form-item>
      <el-form-item label="åº“å­˜" prop="stock">
        <el-input-number v-model="form.stock" :min="0" />
      </el-form-item>

      <!-- å•†å“å›¾ç‰‡ -->
      <el-divider content-position="left">å•†å“å›¾ç‰‡</el-divider>
      <el-form-item label="ä¸»å›¾" prop="mainImage">
        <el-upload
          class="avatar-uploader"
          :action="uploadUrl"
          :show-file-list="false"
          :on-success="handleMainImageSuccess"
        >
          <img v-if="form.mainImage" :src="form.mainImage" class="avatar" />
          <el-icon v-else class="avatar-uploader-icon"><Plus /></el-icon>
        </el-upload>
      </el-form-item>
      <el-form-item label="å•†å“å›¾ç‰‡">
        <el-upload
          :action="uploadUrl"
          list-type="picture-card"
          :file-list="imageList"
          :on-success="handleImagesSuccess"
          :limit="8"
        >
          <el-icon><Plus /></el-icon>
        </el-upload>
      </el-form-item>

      <!-- å•†å“æè¿° -->
      <el-divider content-position="left">å•†å“æè¿°</el-divider>
      <el-form-item label="ç®€çŸ­æè¿°" prop="shortDescription">
        <el-input
          v-model="form.shortDescription"
          type="textarea"
          :rows="3"
          maxlength="500"
          show-word-limit
        />
      </el-form-item>
      <el-form-item label="è¯¦ç»†æè¿°" prop="description">
        <editor v-model="form.description" />
      </el-form-item>

      <!-- å•†å“å±æ€§ -->
      <el-divider content-position="left">å•†å“å±æ€§</el-divider>
      <el-form-item label="æ˜¯å¦ç²¾é€‰">
        <el-switch v-model="form.isFeatured" :active-value="1" :inactive-value="0" />
      </el-form-item>
      <el-form-item label="æ˜¯å¦æ–°å“">
        <el-switch v-model="form.isNew" :active-value="1" :inactive-value="0" />
      </el-form-item>
      <el-form-item label="æ˜¯å¦çƒ­é”€">
        <el-switch v-model="form.isHot" :active-value="1" :inactive-value="0" />
      </el-form-item>
      <el-form-item label="å•†å“çŠ¶æ€">
        <el-radio-group v-model="form.status">
          <el-radio label="0">ä¸Šæ¶</el-radio>
          <el-radio label="1">ä¸‹æ¶</el-radio>
        </el-radio-group>
      </el-form-item>

      <!-- æäº¤æŒ‰é’® -->
      <el-form-item>
        <el-button type="primary" @click="submitForm">ä¿å­˜</el-button>
        <el-button @click="cancel">å–æ¶ˆ</el-button>
      </el-form-item>
    </el-form>
  </div>
</template>
```

### 4. å•†å“ä½ç½®ç®¡ç†é¡µé¢ â­ æ–°å¢

**é¡µé¢è·¯å¾„**: `/system/product/position`

**åŠŸèƒ½è¯´æ˜**ï¼š
ç®¡ç†å•†å“åœ¨å‰ç«¯é¡µé¢çš„å±•ç¤ºä½ç½®ï¼ŒåŒ…æ‹¬é¦–é¡µç²¾é€‰ã€å•†å“åˆ—è¡¨ã€ç›¸å…³å•†å“ä¸‰ä¸ªåŒºåŸŸã€‚

**é¡µé¢å¸ƒå±€**ï¼š

```vue
<template>
  <div class="product-position-management">
    <el-tabs v-model="activeTab" type="card">
      <!-- Tab 1: é¦–é¡µç²¾é€‰å•†å“ -->
      <el-tab-pane label="é¦–é¡µç²¾é€‰å•†å“ (Featured Products)" name="home_featured">
        <el-alert
          title="æç¤ºï¼šé¦–é¡µç²¾é€‰å•†å“æœ€å¤šå±•ç¤º4ä¸ªï¼Œè¯·é€‰æ‹©æœ€ä¼˜è´¨çš„å•†å“è¿›è¡Œå±•ç¤º"
          type="info"
          :closable="false"
          style="margin-bottom: 20px"
        />

        <!-- å·²é€‰å•†å“åˆ—è¡¨ -->
        <div class="selected-products">
          <h3>å·²é€‰å•†å“ ({{ featuredProducts.length }}/4)</h3>
          <el-table :data="featuredProducts" row-key="productId">
            <el-table-column label="æ’åº" width="80">
              <template #default="scope">
                <el-input-number v-model="scope.row.displayOrder" :min="1" :max="100" size="small" />
              </template>
            </el-table-column>
            <el-table-column label="å•†å“å›¾ç‰‡" width="100">
              <template #default="scope">
                <el-image :src="scope.row.mainImage" style="width: 60px; height: 60px" />
              </template>
            </el-table-column>
            <el-table-column label="å•†å“åç§°" prop="productName" />
            <el-table-column label="SKU" prop="productCode" width="120" />
            <el-table-column label="ä»·æ ¼" prop="price" width="100" />
            <el-table-column label="æ“ä½œ" width="100">
              <template #default="scope">
                <el-button type="danger" link @click="removeFromPosition(scope.row, 'home_featured')">
                  ç§»é™¤
                </el-button>
              </template>
            </el-table-column>
          </el-table>
        </div>

        <!-- æ·»åŠ å•†å“æŒ‰é’® -->
        <el-button
          type="primary"
          icon="Plus"
          @click="openProductSelector('home_featured')"
          :disabled="featuredProducts.length >= 4"
          style="margin-top: 20px"
        >
          æ·»åŠ å•†å“åˆ°é¦–é¡µç²¾é€‰
        </el-button>
      </el-tab-pane>

      <!-- Tab 2: ç›¸å…³å•†å“ -->
      <el-tab-pane label="ç›¸å…³å•†å“ (Related Products)" name="product_related">
        <el-alert
          title="æç¤ºï¼šç›¸å…³å•†å“æœ€å¤šå±•ç¤º4ä¸ªï¼Œä¼šåœ¨å•†å“è¯¦æƒ…é¡µä¸‹æ–¹æ˜¾ç¤º"
          type="info"
          :closable="false"
          style="margin-bottom: 20px"
        />

        <!-- å·²é€‰å•†å“åˆ—è¡¨ -->
        <div class="selected-products">
          <h3>å·²é€‰å•†å“ ({{ relatedProducts.length }}/4)</h3>
          <el-table :data="relatedProducts" row-key="productId">
            <el-table-column label="æ’åº" width="80">
              <template #default="scope">
                <el-input-number v-model="scope.row.displayOrder" :min="1" :max="100" size="small" />
              </template>
            </el-table-column>
            <el-table-column label="å•†å“å›¾ç‰‡" width="100">
              <template #default="scope">
                <el-image :src="scope.row.mainImage" style="width: 60px; height: 60px" />
              </template>
            </el-table-column>
            <el-table-column label="å•†å“åç§°" prop="productName" />
            <el-table-column label="SKU" prop="productCode" width="120" />
            <el-table-column label="ä»·æ ¼" prop="price" width="100" />
            <el-table-column label="æ“ä½œ" width="100">
              <template #default="scope">
                <el-button type="danger" link @click="removeFromPosition(scope.row, 'product_related')">
                  ç§»é™¤
                </el-button>
              </template>
            </el-table-column>
          </el-table>
        </div>

        <!-- æ·»åŠ å•†å“æŒ‰é’® -->
        <el-button
          type="primary"
          icon="Plus"
          @click="openProductSelector('product_related')"
          :disabled="relatedProducts.length >= 4"
          style="margin-top: 20px"
        >
          æ·»åŠ å•†å“åˆ°ç›¸å…³å•†å“
        </el-button>
      </el-tab-pane>

      <!-- Tab 3: å•†å“åˆ—è¡¨ -->
      <el-tab-pane label="å•†å“åˆ—è¡¨ (Shop List)" name="shop_list">
        <el-alert
          title="æç¤ºï¼šå•†å“åˆ—è¡¨å±•ç¤ºæ‰€æœ‰ä¸Šæ¶çš„å•†å“ï¼Œå¯ä»¥è°ƒæ•´å±•ç¤ºé¡ºåº"
          type="info"
          :closable="false"
          style="margin-bottom: 20px"
        />

        <!-- å•†å“åˆ—è¡¨ -->
        <el-table :data="shopListProducts" row-key="productId">
          <el-table-column label="æ’åº" width="80">
            <template #default="scope">
              <el-input-number v-model="scope.row.displayOrder" :min="1" :max="1000" size="small" />
            </template>
          </el-table-column>
          <el-table-column label="å•†å“å›¾ç‰‡" width="100">
            <template #default="scope">
              <el-image :src="scope.row.mainImage" style="width: 60px; height: 60px" />
            </template>
          </el-table-column>
          <el-table-column label="å•†å“åç§°" prop="productName" />
          <el-table-column label="SKU" prop="productCode" width="120" />
          <el-table-column label="åˆ†ç±»" prop="categoryName" width="120" />
          <el-table-column label="ä»·æ ¼" prop="price" width="100" />
          <el-table-column label="çŠ¶æ€" width="80">
            <template #default="scope">
              <el-tag :type="scope.row.status === '0' ? 'success' : 'danger'">
                {{ scope.row.status === '0' ? 'ä¸Šæ¶' : 'ä¸‹æ¶' }}
              </el-tag>
            </template>
          </el-table-column>
        </el-table>

        <!-- åˆ†é¡µ -->
        <pagination
          v-model:page="queryParams.pageNum"
          v-model:limit="queryParams.pageSize"
          :total="total"
          @pagination="getShopListProducts"
        />
      </el-tab-pane>
    </el-tabs>

    <!-- ä¿å­˜æŒ‰é’® -->
    <el-row style="margin-top: 20px">
      <el-button type="primary" size="large" @click="savePositions">ä¿å­˜æ‰€æœ‰ä½ç½®è®¾ç½®</el-button>
      <el-button size="large" @click="resetPositions">é‡ç½®</el-button>
    </el-row>

    <!-- å•†å“é€‰æ‹©å™¨å¯¹è¯æ¡† -->
    <el-dialog v-model="productSelectorVisible" title="é€‰æ‹©å•†å“" width="80%">
      <el-form :inline="true">
        <el-form-item label="å•†å“åç§°">
          <el-input v-model="selectorQuery.productName" placeholder="è¯·è¾“å…¥å•†å“åç§°" />
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="searchProducts">æœç´¢</el-button>
        </el-form-item>
      </el-form>

      <el-table :data="availableProducts" @selection-change="handleProductSelection">
        <el-table-column type="selection" width="55" />
        <el-table-column label="å•†å“å›¾ç‰‡" width="100">
          <template #default="scope">
            <el-image :src="scope.row.mainImage" style="width: 60px; height: 60px" />
          </template>
        </el-table-column>
        <el-table-column label="å•†å“åç§°" prop="productName" />
        <el-table-column label="SKU" prop="productCode" width="120" />
        <el-table-column label="ä»·æ ¼" prop="price" width="100" />
      </el-table>

      <template #footer>
        <el-button @click="productSelectorVisible = false">å–æ¶ˆ</el-button>
        <el-button type="primary" @click="confirmProductSelection">ç¡®å®š</el-button>
      </template>
    </el-dialog>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { getProductsByPosition, updateProductPosition } from '@/api/system/product'

const activeTab = ref('home_featured')
const featuredProducts = ref([])
const relatedProducts = ref([])
const shopListProducts = ref([])
const productSelectorVisible = ref(false)
const currentPosition = ref('')
const selectedProducts = ref([])

// åŠ è½½å„ä½ç½®çš„å•†å“
const loadPositionProducts = async () => {
  // åŠ è½½é¦–é¡µç²¾é€‰å•†å“
  const featuredRes = await getProductsByPosition('home_featured')
  featuredProducts.value = featuredRes.data

  // åŠ è½½ç›¸å…³å•†å“
  const relatedRes = await getProductsByPosition('product_related')
  relatedProducts.value = relatedRes.data

  // åŠ è½½å•†å“åˆ—è¡¨
  const shopListRes = await getProductsByPosition('shop_list')
  shopListProducts.value = shopListRes.data
}

// æ‰“å¼€å•†å“é€‰æ‹©å™¨
const openProductSelector = (position) => {
  currentPosition.value = position
  productSelectorVisible.value = true
  searchProducts()
}

// ä»ä½ç½®ç§»é™¤å•†å“
const removeFromPosition = async (product, position) => {
  // è°ƒç”¨APIç§»é™¤å•†å“ä½ç½®
  await updateProductPosition(product.productId, { position, action: 'remove' })
  loadPositionProducts()
}

// ä¿å­˜æ‰€æœ‰ä½ç½®è®¾ç½®
const savePositions = async () => {
  // ä¿å­˜æ‰€æœ‰å•†å“çš„ä½ç½®å’Œé¡ºåº
  const positions = [
    ...featuredProducts.value.map(p => ({ ...p, position: 'home_featured' })),
    ...relatedProducts.value.map(p => ({ ...p, position: 'product_related' })),
    ...shopListProducts.value.map(p => ({ ...p, position: 'shop_list' }))
  ]

  await updateProductPosition(null, { positions })
  ElMessage.success('ä¿å­˜æˆåŠŸ')
}

onMounted(() => {
  loadPositionProducts()
})
</script>
```

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š
1. âœ… **åˆ†æ ‡ç­¾é¡µç®¡ç†**ï¼šé¦–é¡µç²¾é€‰ã€ç›¸å…³å•†å“ã€å•†å“åˆ—è¡¨ä¸‰ä¸ªç‹¬ç«‹æ ‡ç­¾é¡µ
2. âœ… **æ•°é‡é™åˆ¶**ï¼šé¦–é¡µç²¾é€‰å’Œç›¸å…³å•†å“æœ€å¤š4ä¸ªï¼Œè¶…è¿‡åç¦ç”¨æ·»åŠ æŒ‰é’®
3. âœ… **æ‹–æ‹½æ’åº**ï¼šæ”¯æŒé€šè¿‡è¾“å…¥æ•°å­—è°ƒæ•´å±•ç¤ºé¡ºåº
4. âœ… **å•†å“é€‰æ‹©å™¨**ï¼šå¼¹çª—é€‰æ‹©å•†å“ï¼Œæ”¯æŒæœç´¢å’Œå¤šé€‰
5. âœ… **å®æ—¶é¢„è§ˆ**ï¼šæ˜¾ç¤ºå·²é€‰å•†å“çš„å›¾ç‰‡ã€åç§°ã€ä»·æ ¼ç­‰ä¿¡æ¯
6. âœ… **æ‰¹é‡ä¿å­˜**ï¼šä¸€æ¬¡æ€§ä¿å­˜æ‰€æœ‰ä½ç½®çš„è®¾ç½®

---

### 5. å•†å“åˆ†ç±»ç®¡ç†é¡µé¢

**é¡µé¢è·¯å¾„**: `/system/product/category`

**åŠŸèƒ½æ¨¡å—**:
- âœ… æ ‘å½¢è¡¨æ ¼å±•ç¤ºåˆ†ç±»å±‚çº§
- âœ… æ–°å¢åˆ†ç±»ï¼ˆæ”¯æŒå¤šçº§åˆ†ç±»ï¼‰
- âœ… ç¼–è¾‘åˆ†ç±»
- âœ… åˆ é™¤åˆ†ç±»ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰å•†å“ä½¿ç”¨ï¼‰
- âœ… æ‹–æ‹½æ’åº

### 6. è®¢å•ç®¡ç†é¡µé¢

**é¡µé¢è·¯å¾„**: `/system/order/list`

**åŠŸèƒ½æ¨¡å—**:
- âœ… **è®¢å•åˆ—è¡¨**ï¼ˆå«æœç´¢ã€ç­›é€‰ï¼‰
  - è®¢å•å·æœç´¢
  - è®¢å•çŠ¶æ€ç­›é€‰ï¼ˆå¾…æ”¯ä»˜ã€å¾…å‘è´§ã€å·²å‘è´§ã€å·²å®Œæˆã€å·²å–æ¶ˆï¼‰
  - ä¸‹å•æ—¶é—´èŒƒå›´ç­›é€‰
  - å®¢æˆ·å§“å/ç”µè¯æœç´¢
- âœ… **è®¢å•è¯¦æƒ…æŸ¥çœ‹**
  - è®¢å•åŸºæœ¬ä¿¡æ¯ï¼ˆè®¢å•å·ã€ä¸‹å•æ—¶é—´ã€è®¢å•çŠ¶æ€ã€æ”¯ä»˜æ–¹å¼ï¼‰
  - å•†å“æ¸…å•ï¼ˆå•†å“åç§°ã€SKUã€æ•°é‡ã€å•ä»·ã€å°è®¡ï¼‰
  - æ”¶è´§åœ°å€ï¼ˆæ–°è¥¿å…°åœ°å€æ ¼å¼ï¼‰
  - è®¢å•é‡‘é¢ï¼ˆå•†å“æ€»é¢ã€è¿è´¹ã€ä¼˜æƒ ã€å®ä»˜é‡‘é¢ï¼‰
- âœ… **è®¢å•çŠ¶æ€ä¿®æ”¹**
  - å‘è´§ï¼ˆè¾“å…¥ç‰©æµå•å·ï¼‰
  - å®Œæˆè®¢å•
  - å–æ¶ˆè®¢å•
- âœ… **è®¢å•å¯¼å‡º**ï¼ˆExcelæ ¼å¼ï¼‰

**æ”¶è´§åœ°å€æ˜¾ç¤ºæ ¼å¼**ï¼ˆæ–°è¥¿å…°ï¼‰:
```
æ”¶è´§äººï¼šJohn Smith
è”ç³»ç”µè¯ï¼š021 123 4567
æ”¶è´§åœ°å€ï¼š
  123 Queen Street
  Ponsonby
  Auckland, Auckland Region
  1011
  New Zealand
é…é€è¯´æ˜ï¼šLeave at front door
```

**è®¢å•è¯¦æƒ…é¡µé¢ç¤ºä¾‹**:
```vue
<template>
  <el-dialog v-model="visible" title="è®¢å•è¯¦æƒ…" width="80%">
    <el-descriptions :column="2" border>
      <el-descriptions-item label="è®¢å•å·">{{ order.orderNo }}</el-descriptions-item>
      <el-descriptions-item label="ä¸‹å•æ—¶é—´">{{ order.createTime }}</el-descriptions-item>
      <el-descriptions-item label="è®¢å•çŠ¶æ€">
        <el-tag :type="getStatusType(order.status)">{{ getStatusText(order.status) }}</el-tag>
      </el-descriptions-item>
      <el-descriptions-item label="æ”¯ä»˜æ–¹å¼">{{ order.paymentMethod }}</el-descriptions-item>
    </el-descriptions>

    <el-divider content-position="left">æ”¶è´§åœ°å€</el-divider>
    <el-descriptions :column="1" border>
      <el-descriptions-item label="æ”¶è´§äºº">{{ order.shippingAddress.receiverName }}</el-descriptions-item>
      <el-descriptions-item label="è”ç³»ç”µè¯">{{ order.shippingAddress.receiverPhone }}</el-descriptions-item>
      <el-descriptions-item label="æ”¶è´§åœ°å€">
        <div>{{ order.shippingAddress.streetAddress }}</div>
        <div v-if="order.shippingAddress.suburb">{{ order.shippingAddress.suburb }}</div>
        <div>{{ order.shippingAddress.city }}, {{ order.shippingAddress.region }}</div>
        <div>{{ order.shippingAddress.postalCode }}</div>
        <div>{{ order.shippingAddress.country }}</div>
      </el-descriptions-item>
      <el-descriptions-item label="é…é€è¯´æ˜" v-if="order.shippingAddress.deliveryInstructions">
        {{ order.shippingAddress.deliveryInstructions }}
      </el-descriptions-item>
    </el-descriptions>

    <el-divider content-position="left">å•†å“æ¸…å•</el-divider>
    <el-table :data="order.items" border>
      <el-table-column label="å•†å“å›¾ç‰‡" width="100">
        <template #default="scope">
          <el-image :src="scope.row.productImage" style="width: 60px; height: 60px" />
        </template>
      </el-table-column>
      <el-table-column label="å•†å“åç§°" prop="productName" />
      <el-table-column label="SKU" prop="productCode" width="120" />
      <el-table-column label="å•ä»·" prop="price" width="100" />
      <el-table-column label="æ•°é‡" prop="quantity" width="80" />
      <el-table-column label="å°è®¡" width="100">
        <template #default="scope">
          ${{ (scope.row.price * scope.row.quantity).toFixed(2) }}
        </template>
      </el-table-column>
    </el-table>

    <el-divider content-position="left">è®¢å•é‡‘é¢</el-divider>
    <el-descriptions :column="1" border>
      <el-descriptions-item label="å•†å“æ€»é¢">${{ order.totalAmount }}</el-descriptions-item>
      <el-descriptions-item label="è¿è´¹">${{ order.shippingFee }}</el-descriptions-item>
      <el-descriptions-item label="ä¼˜æƒ é‡‘é¢">-${{ order.discountAmount }}</el-descriptions-item>
      <el-descriptions-item label="å®ä»˜é‡‘é¢">
        <span style="color: #f56c6c; font-size: 18px; font-weight: bold">
          ${{ order.paymentAmount }}
        </span>
      </el-descriptions-item>
    </el-descriptions>

    <template #footer>
      <el-button @click="visible = false">å…³é—­</el-button>
      <el-button type="primary" @click="handleShip" v-if="order.status === 'pending_ship'">
        å‘è´§
      </el-button>
      <el-button type="success" @click="handleComplete" v-if="order.status === 'shipped'">
        å®Œæˆè®¢å•
      </el-button>
      <el-button type="danger" @click="handleCancel" v-if="order.status === 'pending_payment'">
        å–æ¶ˆè®¢å•
      </el-button>
    </template>
  </el-dialog>
</template>
```

## ï¿½ æŠ€æœ¯è¦ç‚¹å’Œæœ€ä½³å®è·µ

### 1. å•†å“ä½ç½®ç®¡ç†å®ç°

**æ•°æ®åº“è®¾è®¡**ï¼š
- `displayPosition` å­—æ®µå­˜å‚¨å¤šä¸ªä½ç½®ï¼ˆé€—å·åˆ†éš”ï¼‰ï¼š`"home_featured,shop_list"`
- `displayOrder` å­—æ®µæ§åˆ¶åŒä¸€ä½ç½®å†…çš„æ’åºï¼ˆæ•°å­—è¶Šå°è¶Šé å‰ï¼‰

**å‰ç«¯APIæŸ¥è¯¢ç¤ºä¾‹**ï¼š
```typescript
// è·å–é¦–é¡µç²¾é€‰å•†å“ï¼ˆæœ€å¤š4ä¸ªï¼‰
GET /api/frontend/product/list?displayPosition=home_featured&pageSize=4&sortBy=displayOrder&sortOrder=asc

// è·å–å•†å“åˆ—è¡¨é¡µå•†å“ï¼ˆæ‰€æœ‰ä¸Šæ¶å•†å“ï¼‰
GET /api/frontend/product/list?displayPosition=shop_list&pageNum=1&pageSize=12&sortBy=displayOrder&sortOrder=asc

// è·å–ç›¸å…³å•†å“ï¼ˆæœ€å¤š4ä¸ªï¼‰
GET /api/frontend/product/list?displayPosition=product_related&pageSize=4&sortBy=displayOrder&sortOrder=asc
```

**PrismaæŸ¥è¯¢ç¤ºä¾‹**ï¼š
```typescript
// æŸ¥è¯¢åŒ…å«home_featuredä½ç½®çš„å•†å“
const products = await prisma.product.findMany({
  where: {
    displayPosition: {
      contains: 'home_featured'
    },
    status: '0',
    delFlag: '0'
  },
  orderBy: {
    displayOrder: 'asc'
  },
  take: 4
});
```

### 2. æ–°è¥¿å…°åœ°å€æ ¼å¼å¤„ç†

**å‰ç«¯æ˜¾ç¤ºæ ¼å¼**ï¼š
```
John Smith
021 123 4567
123 Queen Street
Ponsonby
Auckland, Auckland Region
1011
New Zealand
```

**æ•°æ®åº“å­˜å‚¨**ï¼š
- ä½¿ç”¨ç‹¬ç«‹çš„ `customer_address` è¡¨å­˜å‚¨
- è®¢å•è¡¨çš„ `shippingAddress` å­—æ®µå­˜å‚¨JSONæ ¼å¼çš„åœ°å€å¿«ç…§

**åœ°å€éªŒè¯è§„åˆ™**ï¼š
- é‚®æ”¿ç¼–ç ï¼š4ä½æ•°å­—ï¼ˆ1000-9999ï¼‰
- ç”µè¯å·ç ï¼šæ”¯æŒå›ºå®šç”µè¯ï¼ˆå¦‚ 09 123 4567ï¼‰å’Œæ‰‹æœºï¼ˆå¦‚ 021 123 4567ï¼‰
- ä¸»è¦åŸå¸‚ï¼šAuckland, Wellington, Christchurch, Hamilton, Taurangaç­‰

### 3. å›¾ç‰‡ä¸Šä¼ å’Œå­˜å‚¨

**ä¸Šä¼ è·¯å¾„é…ç½®**ï¼š
- é…ç½®åœ¨ `backend/meimei-prisma-vue3/meimei-admin/src/config/config.dev.ts` çš„ `uploadPath` å­—æ®µ
- é»˜è®¤è·¯å¾„ï¼šé¡¹ç›®æ ¹ç›®å½•ä¸‹ `/static/upload/`
- å»ºè®®è·¯å¾„ï¼š`/static/upload/product/{å¹´æœˆ}/{éšæœºæ–‡ä»¶å}.jpg`

**å›¾ç‰‡å­—æ®µå­˜å‚¨**ï¼š
- `mainImage`: ä¸»å›¾ï¼ˆå•å¼ ï¼‰ï¼Œå­˜å‚¨ç›¸å¯¹è·¯å¾„å­—ç¬¦ä¸²
- `images`: å¤šå›¾ï¼ˆJSONæ•°ç»„å­—ç¬¦ä¸²ï¼‰
  ```json
  ["uploads/product/202411/abc123.jpg", "uploads/product/202411/def456.jpg"]
  ```

**å‰ç«¯è®¿é—®URL**ï¼š
- å®Œæ•´URLï¼š`http://localhost:3000/uploads/product/202411/abc123.jpg`
- é™æ€èµ„æºç”±NestJSçš„é™æ€æ–‡ä»¶æœåŠ¡æä¾›

**å›¾ç‰‡å°ºå¯¸è¦æ±‚å’Œå“åº”å¼å¤„ç†** â­ é‡è¦ï¼š

æ ¹æ®å‰ç«¯é¡µé¢å®é™…ä½¿ç”¨çš„å“åº”å¼æ–­ç‚¹å’Œå›¾ç‰‡å°ºå¯¸åˆ†æï¼š

**å‰ç«¯å“åº”å¼æ–­ç‚¹**ï¼š
- **Desktopï¼ˆæ¡Œé¢ï¼‰**: > 1366px
- **Laptopï¼ˆç¬”è®°æœ¬ï¼‰**: â‰¤ 1366px
- **Tablet Extraï¼ˆå¤§å¹³æ¿ï¼‰**: â‰¤ 1200px
- **Tabletï¼ˆå¹³æ¿ï¼‰**: â‰¤ 1024px
- **Mobile Extraï¼ˆå¤§æ‰‹æœºï¼‰**: â‰¤ 880px
- **Mobileï¼ˆæ‰‹æœºï¼‰**: â‰¤ 767px

**å‰ç«¯å®é™…ä½¿ç”¨çš„å›¾ç‰‡å°ºå¯¸**ï¼ˆå‚è€ƒ `frontend/wp-content/uploads/2021/11/` ç›®å½•ï¼‰ï¼š

WordPressè‡ªåŠ¨ç”Ÿæˆçš„å°ºå¯¸ï¼š
- **åŸå›¾**: 800x877pxï¼ˆæˆ–æ›´å¤§ï¼‰
- **768x842**: ç”¨äºå¤§å±å¹•ï¼ˆä¿æŒæ¯”ä¾‹ï¼‰
- **600x600**: æ­£æ–¹å½¢ä¸­å›¾
- **460x460**: æ­£æ–¹å½¢ä¸­å›¾
- **450x450**: æ­£æ–¹å½¢ä¸­å›¾
- **274x300**: å°å›¾ï¼ˆä¿æŒæ¯”ä¾‹ï¼‰
- **150x150**: ç¼©ç•¥å›¾ï¼ˆæ­£æ–¹å½¢ï¼‰
- **100x100**: è¶…å°ç¼©ç•¥å›¾ï¼ˆæ­£æ–¹å½¢ï¼‰
- **96x96**: è¶…å°ç¼©ç•¥å›¾ï¼ˆæ­£æ–¹å½¢ï¼‰
- **50x50**: å¾®å‹ç¼©ç•¥å›¾ï¼ˆæ­£æ–¹å½¢ï¼‰

**å››ä¸ªä½¿ç”¨å•†å“å›¾ç‰‡çš„ä½ç½®**ï¼š

1. **é¦–é¡µï¼ˆindex.htmlï¼‰- Featured ProductsåŒºåŸŸ**ï¼š
   - åŸå›¾ï¼š800x877px
   - srcsetï¼š`800w, 274x300, 768x842`
   - sizesï¼š`(max-width: 800px) 100vw, 800px`
   - å¸ƒå±€ï¼š4åˆ—ï¼ˆcolumns-1ï¼‰ï¼Œæ¯åˆ—100%å®½åº¦
   - å®é™…æ˜¾ç¤ºï¼šçº¦400-600px

2. **å•†å“åˆ—è¡¨é¡µï¼ˆshop/index.htmlï¼‰**ï¼š
   - åŸå›¾ï¼š800x877px
   - srcsetï¼š`800w, 274x300, 768x842`
   - sizesï¼š`(max-width: 800px) 100vw, 800px`
   - å¸ƒå±€ï¼šå“åº”å¼1-4åˆ—
   - å®é™…æ˜¾ç¤ºï¼šDesktopçº¦300-400pxï¼ŒTabletçº¦350-500pxï¼ŒMobileçº¦300-400px

3. **å•†å“è¯¦æƒ…é¡µï¼ˆintelligent-marble-knife/index.htmlï¼‰- ä¸»å›¾åŒºåŸŸ**ï¼š
   - ä¸»å›¾ï¼š800x877px
   - srcsetï¼š`800w, 274x300, 768x842`
   - sizesï¼š`(max-width: 800px) 100vw, 800px`
   - å®é™…æ˜¾ç¤ºï¼šDesktopçº¦500-600pxï¼ŒTabletçº¦400-500pxï¼ŒMobileçº¦300-400px

4. **å•†å“è¯¦æƒ…é¡µ - å·¦ä¾§ç¼©ç•¥å›¾åˆ—è¡¨** â­ æ–°å¢ï¼š
   - data-thumb-sizesï¼š`(max-width: 109px) 100vw, 109px`
   - å®é™…æ˜¾ç¤ºï¼šçº¦100-109px
   - ç”¨é€”ï¼šç‚¹å‡»åˆ‡æ¢ä¸»å›¾

5. **å¿ƒæ„¿å•/æ¯”è¾ƒåŠŸèƒ½**ï¼š
   - ä½¿ç”¨ï¼š150x150px
   - ç”¨é€”ï¼šå¿ƒæ„¿å•ã€æ¯”è¾ƒåˆ—è¡¨çš„å•†å“ç¼©ç•¥å›¾

**æ¨èç”Ÿæˆçš„å›¾ç‰‡å°ºå¯¸**ï¼ˆå®Œå…¨åŒ¹é…å‰ç«¯å®é™…éœ€æ±‚ï¼‰ï¼š
- **åŸå›¾ï¼ˆoriginalï¼‰**: ä¿ç•™ä¸Šä¼ çš„åŸå›¾ï¼ˆæœ€å¤§1200pxå®½åº¦ï¼Œä¿æŒæ¯”ä¾‹ï¼‰
- **å¤§å›¾ï¼ˆlarge_800ï¼‰**: **800x877px** - ä¿æŒåŸæ¯”ä¾‹ï¼Œç”¨äºå•†å“è¯¦æƒ…é¡µä¸»å›¾ã€åˆ—è¡¨é¡µ
- **å¤§å›¾ï¼ˆlarge_768ï¼‰**: **768x842px** - ä¿æŒåŸæ¯”ä¾‹ï¼Œç”¨äºå¤§å±å¹•
- **ä¸­å›¾ï¼ˆmedium_600ï¼‰**: **600x600px** - æ­£æ–¹å½¢è£å‰ªï¼Œç”¨äºæ¡Œé¢ç«¯å•†å“åˆ—è¡¨ã€é¦–é¡µ
- **ä¸­å›¾ï¼ˆmedium_460ï¼‰**: **460x460px** - æ­£æ–¹å½¢è£å‰ªï¼Œå¤‡ç”¨å°ºå¯¸
- **å°å›¾ï¼ˆsmall_274ï¼‰**: **274x300px** - ä¿æŒæ¯”ä¾‹ï¼Œç”¨äºç§»åŠ¨ç«¯
- **ç¼©ç•¥å›¾ï¼ˆthumbnail_150ï¼‰**: **150x150px** - æ­£æ–¹å½¢è£å‰ªï¼Œç”¨äºå¿ƒæ„¿å•ã€è´­ç‰©è½¦
- **å¾®ç¼©å›¾ï¼ˆthumbnail_100ï¼‰**: **100x100px** - æ­£æ–¹å½¢è£å‰ªï¼Œç”¨äºè¯¦æƒ…é¡µå·¦ä¾§ç¼©ç•¥å›¾åˆ—è¡¨
- **WebPæ ¼å¼**: åŒæ—¶ç”Ÿæˆ600x600å’Œ768x842çš„WebPæ ¼å¼ï¼ˆä½“ç§¯æ›´å°30-50%ï¼‰

- **å“åº”å¼å›¾ç‰‡å®ç°æ–¹æ¡ˆ**ï¼š

  **æ–¹æ¡ˆä¸€ï¼šå‰ç«¯CSSå“åº”å¼ï¼ˆæ¨èï¼‰**
  ```css
  /* å•†å“å›¾ç‰‡å®¹å™¨ */
  .product-image {
    width: 100%;
    height: auto;
    object-fit: cover; /* ä¿æŒæ¯”ä¾‹è£å‰ª */
    aspect-ratio: 1 / 1; /* ä¿æŒæ­£æ–¹å½¢ */
  }

  /* å•†å“åˆ—è¡¨å¡ç‰‡å›¾ç‰‡ */
  .product-card img {
    width: 100%;
    height: auto;
    max-width: 400px;
    object-fit: cover;
  }

  /* å•†å“è¯¦æƒ…é¡µä¸»å›¾ */
  .product-detail-image {
    width: 100%;
    max-width: 600px;
    height: auto;
  }

  /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
  @media (max-width: 768px) {
    .product-image {
      max-width: 100%;
    }
  }
  ```

  **æ–¹æ¡ˆäºŒï¼šåç«¯è‡ªåŠ¨ç”Ÿæˆå¤šå°ºå¯¸å›¾ç‰‡ï¼ˆæ¨èï¼Œå·²é‡‡ç”¨ï¼‰** â­
  - ä½¿ç”¨ `sharp` åº“åœ¨ä¸Šä¼ æ—¶è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå°ºå¯¸
  - å­˜å‚¨æ ¼å¼ï¼ˆJSONå­—ç¬¦ä¸²å­˜å‚¨åˆ°æ•°æ®åº“çš„ `mainImage` å’Œ `images` å­—æ®µï¼‰ï¼š
    ```json
    {
      "original": "uploads/product/202411/abc123.jpg",
      "large_800": "uploads/product/202411/abc123_800x877.jpg",
      "large_768": "uploads/product/202411/abc123_768x842.jpg",
      "medium_600": "uploads/product/202411/abc123_600x600.jpg",
      "medium_460": "uploads/product/202411/abc123_460x460.jpg",
      "small_274": "uploads/product/202411/abc123_274x300.jpg",
      "thumbnail_150": "uploads/product/202411/abc123_150x150.jpg",
      "thumbnail_100": "uploads/product/202411/abc123_100x100.jpg",
      "webp_600": "uploads/product/202411/abc123_600x600.webp",
      "webp_768": "uploads/product/202411/abc123_768x842.webp"
    }
    ```

  - **åç«¯å›¾ç‰‡å¤„ç†æœåŠ¡å®Œæ•´ä»£ç **ï¼š
    ```typescript
    // backend/meimei-prisma-vue3/meimei-admin/src/modules/product/image-processor.service.ts
    import { Injectable } from '@nestjs/common';
    import * as sharp from 'sharp';
    import * as path from 'path';
    import * as fs from 'fs';
    import { v4 as uuidv4 } from 'uuid';

    @Injectable()
    export class ImageProcessorService {
      private uploadPath = './static/upload/product';

      /**
       * å¤„ç†å•†å“å›¾ç‰‡ä¸Šä¼ ï¼Œè‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå°ºå¯¸
       * @param file ä¸Šä¼ çš„æ–‡ä»¶
       * @returns è¿”å›å„å°ºå¯¸å›¾ç‰‡çš„è·¯å¾„å¯¹è±¡
       */
      async processProductImage(file: Express.Multer.File): Promise<any> {
        // åˆ›å»ºå¹´æœˆç›®å½•
        const now = new Date();
        const yearMonth = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}`;
        const uploadDir = path.join(this.uploadPath, yearMonth);

        // ç¡®ä¿ç›®å½•å­˜åœ¨
        if (!fs.existsSync(uploadDir)) {
          fs.mkdirSync(uploadDir, { recursive: true });
        }

        // ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å
        const fileName = uuidv4();
        const ext = '.jpg'; // ç»Ÿä¸€è½¬æ¢ä¸ºjpgæ ¼å¼

        // å®šä¹‰å„å°ºå¯¸ï¼ˆå®Œå…¨åŒ¹é…å‰ç«¯å®é™…éœ€æ±‚ï¼‰
        const sizes = {
          original: { width: null, height: null, suffix: '', quality: 90, fit: 'inside' },           // ä¿ç•™åŸå›¾ï¼ˆæœ€å¤§1200pxï¼‰
          large_800: { width: 800, height: 877, suffix: '_800x877', quality: 85, fit: 'inside' },    // å•†å“è¯¦æƒ…é¡µä¸»å›¾ã€åˆ—è¡¨é¡µï¼ˆä¿æŒæ¯”ä¾‹ï¼‰
          large_768: { width: 768, height: 842, suffix: '_768x842', quality: 85, fit: 'inside' },    // å¤§å±å¹•ï¼ˆä¿æŒæ¯”ä¾‹ï¼‰
          medium_600: { width: 600, height: 600, suffix: '_600x600', quality: 85, fit: 'cover' },    // æ¡Œé¢ç«¯å•†å“åˆ—è¡¨ã€é¦–é¡µï¼ˆæ­£æ–¹å½¢ï¼‰
          medium_460: { width: 460, height: 460, suffix: '_460x460', quality: 85, fit: 'cover' },    // å¤‡ç”¨å°ºå¯¸ï¼ˆæ­£æ–¹å½¢ï¼‰
          small_274: { width: 274, height: 300, suffix: '_274x300', quality: 85, fit: 'inside' },    // ç§»åŠ¨ç«¯ï¼ˆä¿æŒæ¯”ä¾‹ï¼‰
          thumbnail_150: { width: 150, height: 150, suffix: '_150x150', quality: 80, fit: 'cover' }, // å¿ƒæ„¿å•ã€è´­ç‰©è½¦ï¼ˆæ­£æ–¹å½¢ï¼‰
          thumbnail_100: { width: 100, height: 100, suffix: '_100x100', quality: 80, fit: 'cover' }  // è¯¦æƒ…é¡µå·¦ä¾§ç¼©ç•¥å›¾ï¼ˆæ­£æ–¹å½¢ï¼‰
        };

        const result = {};

        // ç”Ÿæˆå„å°ºå¯¸å›¾ç‰‡
        for (const [key, config] of Object.entries(sizes)) {
          const outputFileName = `${fileName}${config.suffix}${ext}`;
          const outputPath = path.join(uploadDir, outputFileName);
          const relativePath = `uploads/product/${yearMonth}/${outputFileName}`;

          let sharpInstance = sharp(file.buffer);

          if (config.width && config.height) {
            // è°ƒæ•´å°ºå¯¸
            sharpInstance = sharpInstance.resize(config.width, config.height, {
              fit: config.fit,        // 'cover'=è£å‰ªä¸ºæ­£æ–¹å½¢, 'inside'=ä¿æŒæ¯”ä¾‹
              position: 'center',     // å±…ä¸­è£å‰ª/å¯¹é½
              withoutEnlargement: true
            });
          } else {
            // åŸå›¾ï¼šé™åˆ¶æœ€å¤§å®½åº¦ä¸º1200px
            const metadata = await sharp(file.buffer).metadata();
            if (metadata.width > 1200) {
              sharpInstance = sharpInstance.resize(1200, null, {
                fit: 'inside',        // ä¿æŒæ¯”ä¾‹ï¼Œä¸è£å‰ª
                withoutEnlargement: true
              });
            }
          }

          // è½¬æ¢ä¸ºjpgæ ¼å¼ï¼Œå‹ç¼©
          await sharpInstance
            .jpeg({ quality: config.quality })
            .toFile(outputPath);

          result[key] = relativePath;
        }

        // åŒæ—¶ç”ŸæˆWebPæ ¼å¼ï¼ˆç”¨äºç°ä»£æµè§ˆå™¨ï¼Œä½“ç§¯æ›´å°30-50%ï¼‰
        // ç”Ÿæˆ600x600æ­£æ–¹å½¢WebP
        const webp600FileName = `${fileName}_600x600.webp`;
        const webp600Path = path.join(uploadDir, webp600FileName);
        await sharp(file.buffer)
          .resize(600, 600, { fit: 'cover', position: 'center' })
          .webp({ quality: 80 })
          .toFile(webp600Path);
        result['webp_600'] = `uploads/product/${yearMonth}/${webp600FileName}`;

        // ç”Ÿæˆ768x842ä¿æŒæ¯”ä¾‹WebP
        const webp768FileName = `${fileName}_768x842.webp`;
        const webp768Path = path.join(uploadDir, webp768FileName);
        await sharp(file.buffer)
          .resize(768, 842, { fit: 'inside', position: 'center' })
          .webp({ quality: 80 })
          .toFile(webp768Path);
        result['webp_768'] = `uploads/product/${yearMonth}/${webp768FileName}`;

        return result;
      }

      /**
       * åˆ é™¤å•†å“å›¾ç‰‡ï¼ˆåˆ é™¤æ‰€æœ‰å°ºå¯¸ï¼‰
       * @param imagePath å›¾ç‰‡è·¯å¾„å¯¹è±¡æˆ–ä¸»å›¾è·¯å¾„å­—ç¬¦ä¸²
       */
      async deleteProductImage(imagePath: any): Promise<void> {
        if (typeof imagePath === 'string') {
          // å•ä¸ªè·¯å¾„å­—ç¬¦ä¸²
          const fullPath = path.join('./', imagePath);
          if (fs.existsSync(fullPath)) {
            fs.unlinkSync(fullPath);
          }
        } else if (typeof imagePath === 'object' && imagePath !== null) {
          // å¤šå°ºå¯¸è·¯å¾„å¯¹è±¡
          for (const imgPath of Object.values(imagePath)) {
            if (typeof imgPath === 'string') {
              const fullPath = path.join('./', imgPath);
              if (fs.existsSync(fullPath)) {
                fs.unlinkSync(fullPath);
              }
            }
          }
        }
      }

      /**
       * æ‰¹é‡åˆ é™¤å•†å“å›¾ç‰‡ï¼ˆç”¨äºåˆ é™¤å•†å“æ—¶ï¼‰
       * @param mainImage ä¸»å›¾è·¯å¾„å¯¹è±¡
       * @param images å¤šå›¾æ•°ç»„ï¼ˆæ¯ä¸ªå…ƒç´ æ˜¯è·¯å¾„å¯¹è±¡ï¼‰
       */
      async deleteProductImages(mainImage: any, images: any[]): Promise<void> {
        // åˆ é™¤ä¸»å›¾
        if (mainImage) {
          await this.deleteProductImage(mainImage);
        }

        // åˆ é™¤å¤šå›¾
        if (Array.isArray(images)) {
          for (const image of images) {
            await this.deleteProductImage(image);
          }
        }
      }
    }
    ```

  - å‰ç«¯ä½¿ç”¨ `<picture>` æ ‡ç­¾æˆ– `srcset` å±æ€§ï¼š
    ```html
    <!-- ä½¿ç”¨srcsetå®ç°å“åº”å¼å›¾ç‰‡ -->
    <img
      src="http://localhost:3000/uploads/product/202411/abc123_600x600.jpg"
      srcset="
        http://localhost:3000/uploads/product/202411/abc123_300x300.jpg 300w,
        http://localhost:3000/uploads/product/202411/abc123_600x600.jpg 600w,
        http://localhost:3000/uploads/product/202411/abc123_1200x1200.jpg 1200w
      "
      sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px"
      alt="Product Image"
      loading="lazy"
      class="product-image"
    />

    <!-- ä½¿ç”¨pictureæ ‡ç­¾æ”¯æŒWebPæ ¼å¼ -->
    <picture>
      <source
        type="image/webp"
        srcset="http://localhost:3000/uploads/product/202411/abc123_600x600.webp"
      />
      <img
        src="http://localhost:3000/uploads/product/202411/abc123_600x600.jpg"
        alt="Product Image"
        loading="lazy"
        class="product-image"
      />
    </picture>
    ```

  **æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨CDNå›¾ç‰‡å¤„ç†æœåŠ¡ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰**
  - ä½¿ç”¨é˜¿é‡Œäº‘OSSã€è…¾è®¯äº‘COSç­‰CDNæœåŠ¡çš„å›¾ç‰‡å¤„ç†åŠŸèƒ½
  - URLå‚æ•°æ§åˆ¶å°ºå¯¸ï¼š`https://cdn.example.com/product/abc123.jpg?x-oss-process=image/resize,w_600`
  - ä¼˜ç‚¹ï¼šæ— éœ€åç«¯å¤„ç†ï¼ŒCDNè‡ªåŠ¨ç¼“å­˜ï¼ŒåŠ è½½é€Ÿåº¦å¿«

- **å•†å“Serviceä¸­çš„å›¾ç‰‡å¤„ç†é€»è¾‘**ï¼š

  ```typescript
  // backend/meimei-prisma-vue3/meimei-admin/src/modules/product/product.service.ts
  import { Injectable } from '@nestjs/common';
  import { PrismaService } from '../prisma/prisma.service';
  import { ImageProcessorService } from './image-processor.service';

  @Injectable()
  export class ProductService {
    constructor(
      private prisma: PrismaService,
      private imageProcessor: ImageProcessorService
    ) {}

    /**
     * åˆ›å»ºå•†å“ï¼ˆå«å›¾ç‰‡ä¸Šä¼ ï¼‰
     */
    async createProduct(data: any, mainImageFile?: Express.Multer.File, imageFiles?: Express.Multer.File[]) {
      // å¤„ç†ä¸»å›¾
      let mainImagePaths = null;
      if (mainImageFile) {
        mainImagePaths = await this.imageProcessor.processProductImage(mainImageFile);
      }

      // å¤„ç†å¤šå›¾
      let imagePaths = [];
      if (imageFiles && imageFiles.length > 0) {
        for (const file of imageFiles) {
          const paths = await this.imageProcessor.processProductImage(file);
          imagePaths.push(paths);
        }
      }

      // åˆ›å»ºå•†å“è®°å½•
      return await this.prisma.product.create({
        data: {
          ...data,
          mainImage: mainImagePaths ? JSON.stringify(mainImagePaths) : null,  // å­˜å‚¨ä¸ºJSONå­—ç¬¦ä¸²
          images: imagePaths.length > 0 ? JSON.stringify(imagePaths) : null,  // å­˜å‚¨ä¸ºJSONå­—ç¬¦ä¸²
          createTime: new Date(),
          updateTime: new Date()
        }
      });
    }

    /**
     * ä¿®æ”¹å•†å“ï¼ˆå«å›¾ç‰‡æ›´æ–°ï¼‰
     */
    async updateProduct(
      productId: number,
      data: any,
      mainImageFile?: Express.Multer.File,
      imageFiles?: Express.Multer.File[],
      deleteMainImage?: boolean,  // æ˜¯å¦åˆ é™¤ä¸»å›¾
      deleteImageIndexes?: number[]  // è¦åˆ é™¤çš„å¤šå›¾ç´¢å¼•
    ) {
      // è·å–åŸå•†å“æ•°æ®
      const product = await this.prisma.product.findUnique({
        where: { productId }
      });

      if (!product) {
        throw new Error('å•†å“ä¸å­˜åœ¨');
      }

      // è§£æåŸå›¾ç‰‡æ•°æ®
      let oldMainImage = product.mainImage ? JSON.parse(product.mainImage) : null;
      let oldImages = product.images ? JSON.parse(product.images) : [];

      // å¤„ç†ä¸»å›¾æ›´æ–°
      let newMainImage = oldMainImage;
      if (deleteMainImage && oldMainImage) {
        // åˆ é™¤æ—§ä¸»å›¾
        await this.imageProcessor.deleteProductImage(oldMainImage);
        newMainImage = null;
      }
      if (mainImageFile) {
        // åˆ é™¤æ—§ä¸»å›¾ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        if (oldMainImage) {
          await this.imageProcessor.deleteProductImage(oldMainImage);
        }
        // ä¸Šä¼ æ–°ä¸»å›¾
        newMainImage = await this.imageProcessor.processProductImage(mainImageFile);
      }

      // å¤„ç†å¤šå›¾æ›´æ–°
      let newImages = [...oldImages];

      // åˆ é™¤æŒ‡å®šçš„å¤šå›¾
      if (deleteImageIndexes && deleteImageIndexes.length > 0) {
        for (const index of deleteImageIndexes.sort((a, b) => b - a)) {  // ä»åå¾€å‰åˆ é™¤
          if (index >= 0 && index < newImages.length) {
            await this.imageProcessor.deleteProductImage(newImages[index]);
            newImages.splice(index, 1);
          }
        }
      }

      // æ·»åŠ æ–°çš„å¤šå›¾
      if (imageFiles && imageFiles.length > 0) {
        for (const file of imageFiles) {
          const paths = await this.imageProcessor.processProductImage(file);
          newImages.push(paths);
        }
      }

      // æ›´æ–°å•†å“è®°å½•
      return await this.prisma.product.update({
        where: { productId },
        data: {
          ...data,
          mainImage: newMainImage ? JSON.stringify(newMainImage) : null,
          images: newImages.length > 0 ? JSON.stringify(newImages) : null,
          updateTime: new Date()
        }
      });
    }

    /**
     * åˆ é™¤å•†å“ï¼ˆå«å›¾ç‰‡åˆ é™¤ï¼‰
     */
    async deleteProduct(productId: number) {
      // è·å–å•†å“æ•°æ®
      const product = await this.prisma.product.findUnique({
        where: { productId }
      });

      if (!product) {
        throw new Error('å•†å“ä¸å­˜åœ¨');
      }

      // è§£æå›¾ç‰‡æ•°æ®
      const mainImage = product.mainImage ? JSON.parse(product.mainImage) : null;
      const images = product.images ? JSON.parse(product.images) : [];

      // åˆ é™¤æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶
      await this.imageProcessor.deleteProductImages(mainImage, images);

      // è½¯åˆ é™¤å•†å“è®°å½•
      return await this.prisma.product.update({
        where: { productId },
        data: {
          delFlag: '1',
          updateTime: new Date()
        }
      });
    }
  }
  ```

- **å›¾ç‰‡ä¼˜åŒ–å»ºè®®**ï¼š
  - âœ… ä½¿ç”¨WebPæ ¼å¼ï¼ˆä½“ç§¯å°30-50%ï¼Œè´¨é‡é«˜ï¼‰
  - âœ… å¯ç”¨æ‡’åŠ è½½ï¼ˆ`loading="lazy"`ï¼‰
  - âœ… æ·»åŠ å›¾ç‰‡å ä½ç¬¦ï¼ˆé¿å…å¸ƒå±€æŠ–åŠ¨ï¼‰
  - âœ… å‹ç¼©å›¾ç‰‡è´¨é‡ï¼ˆ80-85%å³å¯ï¼Œè‚‰çœ¼å‡ ä¹æ— å·®åˆ«ï¼‰
  - âœ… ä½¿ç”¨CDNåŠ é€Ÿï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
  - âœ… è‡ªåŠ¨ç”Ÿæˆå¤šå°ºå¯¸ï¼ˆæ ¹æ®æ–­ç‚¹ä¼˜åŒ–åŠ è½½ï¼‰

### 4. è´­ç‰©è½¦å’Œè®¢å•æµç¨‹

**è´­ç‰©è½¦æµç¨‹**ï¼š
1. ç”¨æˆ·ç‚¹å‡»"Add to cart"æŒ‰é’®
2. å‰ç«¯æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼ˆJWT tokenï¼‰
3. è°ƒç”¨ `POST /api/frontend/product/cart/add` æ¥å£
4. åç«¯æ£€æŸ¥å•†å“åº“å­˜æ˜¯å¦å……è¶³
5. æ·»åŠ åˆ°è´­ç‰©è½¦è¡¨æˆ–æ›´æ–°æ•°é‡
6. è¿”å›æˆåŠŸï¼Œå‰ç«¯æ›´æ–°è´­ç‰©è½¦å¾½ç« æ•°å­—

**è®¢å•åˆ›å»ºæµç¨‹**ï¼š
1. ç”¨æˆ·åœ¨è´­ç‰©è½¦é¡µé¢ç‚¹å‡»"Checkout"
2. è·³è½¬åˆ°è®¢å•ç¡®è®¤é¡µé¢
3. é€‰æ‹©æˆ–æ–°å¢æ”¶è´§åœ°å€ï¼ˆæ–°è¥¿å…°æ ¼å¼ï¼‰
4. è°ƒç”¨ `POST /api/frontend/product/order/create` æ¥å£
5. åç«¯åˆ›å»ºè®¢å•è®°å½•å’Œè®¢å•æ˜ç»†
6. æ‰£å‡å•†å“åº“å­˜
7. æ¸…ç©ºè´­ç‰©è½¦ä¸­å·²ä¸‹å•çš„å•†å“
8. è¿”å›è®¢å•å·ï¼Œè·³è½¬åˆ°è®¢å•è¯¦æƒ…é¡µ

### 5. æ€§èƒ½ä¼˜åŒ–å»ºè®®

**æ•°æ®åº“ä¼˜åŒ–**ï¼š
- âœ… æ‰€æœ‰å¤–é”®å­—æ®µéƒ½å·²æ·»åŠ ç´¢å¼•
- âœ… å¸¸ç”¨æŸ¥è¯¢å­—æ®µï¼ˆstatus, displayPositionï¼‰å·²æ·»åŠ ç´¢å¼•
- âœ… ä½¿ç”¨ `delFlag` è½¯åˆ é™¤ï¼Œé¿å…ç‰©ç†åˆ é™¤æ•°æ®
- å»ºè®®ï¼šå®šæœŸæ¸…ç†è½¯åˆ é™¤çš„æ•°æ®ï¼ˆdelFlag='1'ï¼‰

**ç¼“å­˜ç­–ç•¥ï¼ˆå¯é€‰ï¼‰**ï¼š
- å•†å“åˆ—è¡¨ï¼šRedisç¼“å­˜5åˆ†é’Ÿ
- å•†å“è¯¦æƒ…ï¼šRedisç¼“å­˜10åˆ†é’Ÿ
- å•†å“åˆ†ç±»æ ‘ï¼šRedisç¼“å­˜30åˆ†é’Ÿ
- ç¼“å­˜keyæ ¼å¼ï¼š`product:list:{categoryId}:{pageNum}:{pageSize}`

**å‰ç«¯ä¼˜åŒ–**ï¼š
- å›¾ç‰‡æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰
- å•†å“åˆ—è¡¨åˆ†é¡µåŠ è½½
- ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº

### 6. è®¤è¯å’Œæˆæƒ

**å‰ç«¯ç”¨æˆ·è®¤è¯**ï¼š
- ä½¿ç”¨ `@UseGuards(CustomerJwtAuthGuard)` è£…é¥°å™¨
- Tokenå­˜å‚¨åœ¨Redisï¼š`customer_token:{customerId}`
- Tokenæœ‰æ•ˆæœŸï¼š7å¤©
- Token payloadï¼š`{ customerId, email, type: 'customer' }`

**åå°ç®¡ç†å‘˜è®¤è¯**ï¼š
- ä½¿ç”¨ `@UseGuards(JwtAuthGuard)` è£…é¥°å™¨
- Tokenå­˜å‚¨åœ¨Redisï¼š`USER_TOKEN_KEY:{userId}`
- Tokenæœ‰æ•ˆæœŸï¼š1å¹´ï¼ˆç”±Redisç®¡æ§å®é™…è¿‡æœŸæ—¶é—´ï¼‰
- Token payloadï¼š`{ userId, pv }`ï¼ˆpvä¸ºå¯†ç ç‰ˆæœ¬å·ï¼‰

**å…¬å¼€æ¥å£**ï¼ˆæ— éœ€è®¤è¯ï¼‰ï¼š
- å•†å“åˆ—è¡¨ï¼š`GET /api/frontend/product/list`
- å•†å“è¯¦æƒ…ï¼š`GET /api/frontend/product/:productId`
- å•†å“åˆ†ç±»æ ‘ï¼š`GET /api/frontend/product/category/tree`

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. APIé‰´æƒ
- **å‰ç«¯å•†å“API**ï¼šè´­ç‰©è½¦ã€è®¢å•ã€å¿ƒæ„¿å•ã€æ”¶è´§åœ°å€éœ€è¦JWT tokenéªŒè¯
- **åå°ç®¡ç†API**ï¼šæ‰€æœ‰æ¥å£éœ€è¦ç®¡ç†å‘˜tokenéªŒè¯
- **å…¬å¼€æ¥å£**ï¼šå•†å“åˆ—è¡¨ã€å•†å“è¯¦æƒ…ã€åˆ†ç±»æ ‘ç­‰ä¸éœ€è¦ç™»å½•

### 2. æ•°æ®éªŒè¯
- ä½¿ç”¨ `class-validator` è¿›è¡ŒDTOéªŒè¯
- ç¤ºä¾‹ï¼š
  ```typescript
  export class CreateProductDto {
    @IsNotEmpty({ message: 'å•†å“åç§°ä¸èƒ½ä¸ºç©º' })
    @MaxLength(200, { message: 'å•†å“åç§°æœ€å¤š200ä¸ªå­—ç¬¦' })
    productName: string;

    @IsNotEmpty({ message: 'å•†å“ä»·æ ¼ä¸èƒ½ä¸ºç©º' })
    @IsNumber({}, { message: 'å•†å“ä»·æ ¼å¿…é¡»æ˜¯æ•°å­—' })
    @Min(0.01, { message: 'å•†å“ä»·æ ¼å¿…é¡»å¤§äº0' })
    price: number;

    @IsInt({ message: 'åº“å­˜å¿…é¡»æ˜¯æ•´æ•°' })
    @Min(0, { message: 'åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°' })
    stock: number;
  }
  ```

### 3. æƒé™æ§åˆ¶å’Œæ•°æ®éš”ç¦» â­ é‡è¦

**æ ¸å¿ƒåŸåˆ™**ï¼šæ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®å’Œæ“ä½œè‡ªå·±çš„æ•°æ®

#### **å‰ç«¯ç”¨æˆ·æ•°æ®éš”ç¦»**ï¼š

**1. è´­ç‰©è½¦æ•°æ®éš”ç¦»**ï¼š
```typescript
// åœ¨Serviceä¸­ï¼ŒcustomerIdä»JWT tokenä¸­è·å–
async getCart(customerId: number) {
  // åªèƒ½æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è´­ç‰©è½¦
  return await this.prisma.shoppingCart.findMany({
    where: {
      customerId: customerId  // ä»JWT tokenä¸­è·å–ï¼Œä¸èƒ½ä»è¯·æ±‚å‚æ•°è·å–
    },
    include: {
      product: true  // å…³è”æŸ¥è¯¢å•†å“ä¿¡æ¯
    }
  });
}

// æ·»åŠ åˆ°è´­ç‰©è½¦æ—¶ä¹Ÿè¦éªŒè¯
async addToCart(customerId: number, productId: number, quantity: number) {
  // customerIdå¿…é¡»ä»JWT tokenä¸­è·å–ï¼Œä¸èƒ½ä¿¡ä»»å‰ç«¯ä¼ é€’çš„å€¼
  return await this.prisma.shoppingCart.create({
    data: {
      customerId: customerId,  // ä»tokenè·å–
      productId: productId,
      quantity: quantity
    }
  });
}
```

**2. æ”¶è´§åœ°å€æ•°æ®éš”ç¦»**ï¼š
```typescript
// è·å–åœ°å€åˆ—è¡¨
async getAddressList(customerId: number) {
  return await this.prisma.customerAddress.findMany({
    where: {
      customerId: customerId,  // ä»JWT tokenä¸­è·å–
      delFlag: '0'
    },
    orderBy: {
      isDefault: 'desc'  // é»˜è®¤åœ°å€æ’åœ¨å‰é¢
    }
  });
}

// æ·»åŠ /ä¿®æ”¹åœ°å€æ—¶éªŒè¯æ‰€æœ‰æƒ
async updateAddress(customerId: number, addressId: number, data: any) {
  // å…ˆæ£€æŸ¥åœ°å€æ˜¯å¦å±äºå½“å‰ç”¨æˆ·
  const address = await this.prisma.customerAddress.findFirst({
    where: {
      addressId: addressId,
      customerId: customerId  // å…³é”®ï¼šç¡®ä¿åœ°å€å±äºå½“å‰ç”¨æˆ·
    }
  });

  if (!address) {
    throw new Error('åœ°å€ä¸å­˜åœ¨æˆ–æ— æƒé™æ“ä½œ');
  }

  // æ‰§è¡Œæ›´æ–°
  return await this.prisma.customerAddress.update({
    where: { addressId },
    data: data
  });
}

// åˆ é™¤åœ°å€æ—¶éªŒè¯æ‰€æœ‰æƒ
async deleteAddress(customerId: number, addressId: number) {
  // è½¯åˆ é™¤ï¼Œå¹¶éªŒè¯æ‰€æœ‰æƒ
  const result = await this.prisma.customerAddress.updateMany({
    where: {
      addressId: addressId,
      customerId: customerId  // å…³é”®ï¼šåªèƒ½åˆ é™¤è‡ªå·±çš„åœ°å€
    },
    data: {
      delFlag: '1'
    }
  });

  if (result.count === 0) {
    throw new Error('åœ°å€ä¸å­˜åœ¨æˆ–æ— æƒé™æ“ä½œ');
  }

  return result;
}
```

**3. è®¢å•æ•°æ®éš”ç¦»**ï¼š
```typescript
// è·å–è®¢å•åˆ—è¡¨
async getOrderList(customerId: number, pageNum: number, pageSize: number) {
  return await this.prisma.customerOrder.findMany({
    where: {
      customerId: customerId,  // ä»JWT tokenä¸­è·å–
    },
    include: {
      orderItems: {
        include: {
          product: true
        }
      }
    },
    skip: (pageNum - 1) * pageSize,
    take: pageSize,
    orderBy: {
      createTime: 'desc'
    }
  });
}

// è·å–è®¢å•è¯¦æƒ…
async getOrderDetail(customerId: number, orderId: number) {
  const order = await this.prisma.customerOrder.findFirst({
    where: {
      orderId: orderId,
      customerId: customerId  // å…³é”®ï¼šç¡®ä¿è®¢å•å±äºå½“å‰ç”¨æˆ·
    },
    include: {
      orderItems: {
        include: {
          product: true
        }
      }
    }
  });

  if (!order) {
    throw new Error('è®¢å•ä¸å­˜åœ¨æˆ–æ— æƒé™æŸ¥çœ‹');
  }

  return order;
}
```

**4. å¿ƒæ„¿å•æ•°æ®éš”ç¦»**ï¼š
```typescript
// è·å–å¿ƒæ„¿å•
async getWishlist(customerId: number) {
  return await this.prisma.wishlist.findMany({
    where: {
      customerId: customerId  // ä»JWT tokenä¸­è·å–
    },
    include: {
      product: true
    }
  });
}

// åˆ é™¤å¿ƒæ„¿å•å•†å“
async removeFromWishlist(customerId: number, wishlistId: number) {
  const result = await this.prisma.wishlist.deleteMany({
    where: {
      wishlistId: wishlistId,
      customerId: customerId  // å…³é”®ï¼šåªèƒ½åˆ é™¤è‡ªå·±çš„å¿ƒæ„¿å•
    }
  });

  if (result.count === 0) {
    throw new Error('å¿ƒæ„¿å•é¡¹ä¸å­˜åœ¨æˆ–æ— æƒé™æ“ä½œ');
  }

  return result;
}
```

#### **Controllerå±‚è·å–customerIdçš„æ ‡å‡†æ–¹å¼**ï¼š

```typescript
import { Controller, Get, Post, Body, UseGuards, Request } from '@nestjs/common';
import { CustomerJwtAuthGuard } from '../frontend-auth/guards/customer-jwt-auth.guard';

@Controller('api/frontend/product')
export class ProductController {

  // è·å–è´­ç‰©è½¦
  @Get('cart/list')
  @UseGuards(CustomerJwtAuthGuard)  // ä½¿ç”¨JWTå®ˆå«
  async getCart(@Request() req) {
    const customerId = req.user.customerId;  // ä»JWT tokenä¸­è·å–
    return await this.productService.getCart(customerId);
  }

  // æ·»åŠ åˆ°è´­ç‰©è½¦
  @Post('cart/add')
  @UseGuards(CustomerJwtAuthGuard)
  async addToCart(@Request() req, @Body() body: AddToCartDto) {
    const customerId = req.user.customerId;  // ä»JWT tokenä¸­è·å–ï¼Œä¸ä»bodyè·å–
    return await this.productService.addToCart(
      customerId,
      body.productId,
      body.quantity
    );
  }

  // è·å–æ”¶è´§åœ°å€åˆ—è¡¨
  @Get('address/list')
  @UseGuards(CustomerJwtAuthGuard)
  async getAddressList(@Request() req) {
    const customerId = req.user.customerId;  // ä»JWT tokenä¸­è·å–
    return await this.addressService.getAddressList(customerId);
  }

  // åˆ›å»ºè®¢å•
  @Post('order/create')
  @UseGuards(CustomerJwtAuthGuard)
  async createOrder(@Request() req, @Body() body: CreateOrderDto) {
    const customerId = req.user.customerId;  // ä»JWT tokenä¸­è·å–
    return await this.orderService.createOrder(customerId, body);
  }
}
```

#### **å…³é”®å®‰å…¨è¦ç‚¹**ï¼š

1. âœ… **æ°¸è¿œä¸è¦ä¿¡ä»»å‰ç«¯ä¼ é€’çš„customerId** - å¿…é¡»ä»JWT tokenä¸­è·å–
2. âœ… **æ‰€æœ‰æŸ¥è¯¢éƒ½è¦åŠ ä¸ŠcustomerIdæ¡ä»¶** - ç¡®ä¿æ•°æ®éš”ç¦»
3. âœ… **ä¿®æ”¹/åˆ é™¤æ“ä½œå‰å…ˆéªŒè¯æ‰€æœ‰æƒ** - ä½¿ç”¨ `findFirst` æˆ– `updateMany` å¸¦customerIdæ¡ä»¶
4. âœ… **ä½¿ç”¨ `updateMany` æˆ– `deleteMany`** - è‡ªåŠ¨éªŒè¯æ‰€æœ‰æƒï¼Œå¦‚æœcount=0è¯´æ˜æ— æƒé™
5. âœ… **ç®¡ç†å‘˜æŸ¥çœ‹æ‰€æœ‰è®¢å•æ—¶ä¸åŠ customerIdé™åˆ¶** - ä½†è¦éªŒè¯ç®¡ç†å‘˜æƒé™

#### **ç®¡ç†å‘˜æƒé™æ§åˆ¶**ï¼š

```typescript
// ç®¡ç†å‘˜æŸ¥çœ‹æ‰€æœ‰è®¢å•ï¼ˆä¸é™åˆ¶customerIdï¼‰
@Get('system/order/list')
@UseGuards(JwtAuthGuard)  // ç®¡ç†å‘˜å®ˆå«
async getOrderListAdmin(@Request() req, @Query() query: OrderQueryDto) {
  // ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰è®¢å•
  return await this.orderService.getOrderListAdmin(query);
}

// ç®¡ç†å‘˜ä¿®æ”¹è®¢å•çŠ¶æ€
@Put('system/order/:orderId/status')
@UseGuards(JwtAuthGuard)
async updateOrderStatus(
  @Param('orderId') orderId: number,
  @Body() body: UpdateOrderStatusDto
) {
  // ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹ä»»ä½•è®¢å•
  return await this.orderService.updateOrderStatus(orderId, body.status);
}
```

### 4. SQLæ³¨å…¥é˜²æŠ¤
- ä½¿ç”¨Prisma ORMè‡ªåŠ¨é˜²æŠ¤
- é¿å…ä½¿ç”¨åŸå§‹SQLæŸ¥è¯¢ï¼ˆ`$queryRaw`ï¼‰
- å¦‚å¿…é¡»ä½¿ç”¨åŸå§‹SQLï¼Œä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢

### 5. XSSé˜²æŠ¤
- å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè½¬ä¹‰å¤„ç†
- å¯Œæ–‡æœ¬å†…å®¹ä½¿ç”¨DOMPurifyæ¸…ç†
- å‰ç«¯æ˜¾ç¤ºæ—¶ä½¿ç”¨ `textContent` è€Œé `innerHTML`ï¼ˆé™¤éæ˜¯å¯ä¿¡çš„å¯Œæ–‡æœ¬å†…å®¹ï¼‰

### 6. åº“å­˜å¹¶å‘æ§åˆ¶
- ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿åº“å­˜æ‰£å‡çš„åŸå­æ€§
- ç¤ºä¾‹ï¼š
  ```typescript
  await prisma.$transaction(async (tx) => {
    // 1. æ£€æŸ¥åº“å­˜
    const product = await tx.product.findUnique({
      where: { productId }
    });

    if (product.stock < quantity) {
      throw new Error('åº“å­˜ä¸è¶³');
    }

    // 2. æ‰£å‡åº“å­˜
    await tx.product.update({
      where: { productId },
      data: {
        stock: {
          decrement: quantity
        }
      }
    });

    // 3. åˆ›å»ºè®¢å•
    await tx.customerOrder.create({
      data: orderData
    });
  });
  ```

## ğŸ“¦ ä¾èµ–åŒ…æ¸…å•

### åç«¯ä¾èµ–
```json
{
  "@nestjs/common": "^10.0.0",
  "@nestjs/core": "^10.0.0",
  "@nestjs/platform-express": "^10.0.0",
  "@nestjs/passport": "^10.0.0",
  "@nestjs/jwt": "^10.0.0",
  "@prisma/client": "^5.0.0",
  "prisma": "^5.0.0",
  "class-validator": "^0.14.0",
  "class-transformer": "^0.5.1",
  "multer": "^1.4.5-lts.1",
  "sharp": "^0.33.0",
  "uuid": "^9.0.0"
}
```

**ä¾èµ–è¯´æ˜**ï¼š
- `@nestjs/platform-express`: Expresså¹³å°æ”¯æŒï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰
- `@nestjs/passport` & `@nestjs/jwt`: JWTè®¤è¯ï¼ˆå·²å­˜åœ¨ï¼‰
- `@prisma/client`: Prisma ORMå®¢æˆ·ç«¯ï¼ˆå·²å­˜åœ¨ï¼‰
- `class-validator` & `class-transformer`: DTOéªŒè¯ï¼ˆå·²å­˜åœ¨ï¼‰
- `multer`: æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶
- `sharp`: å›¾ç‰‡å¤„ç†åº“ï¼ˆç”Ÿæˆå¤šå°ºå¯¸å›¾ç‰‡ã€å‹ç¼©ã€æ ¼å¼è½¬æ¢ï¼‰â­ æ¨è
- `uuid`: ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å

### å‰ç«¯ä¾èµ–
æ— éœ€é¢å¤–ä¾èµ–ï¼Œä½¿ç”¨åŸç”ŸJavaScript

**å‰ç«¯ä¼˜åŒ–å»ºè®®**ï¼ˆå¯é€‰ï¼‰ï¼š
- ä½¿ç”¨ `lazysizes` åº“å®ç°å›¾ç‰‡æ‡’åŠ è½½
- ä½¿ç”¨ `lozad` åº“å®ç°è½»é‡çº§æ‡’åŠ è½½
- ä½¿ç”¨åŸç”Ÿ `loading="lazy"` å±æ€§ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰

## ğŸš€ éƒ¨ç½²æ­¥éª¤

1. æ‰§è¡Œæ•°æ®åº“è¿ç§»
2. å¯åŠ¨åç«¯æœåŠ¡
3. é…ç½®å‰ç«¯APIåœ°å€
4. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
5. ä¸Šçº¿å‘å¸ƒ

## ğŸ“‹ å®æ–½æ£€æŸ¥æ¸…å•

### æ•°æ®åº“
- [ ] æ‰€æœ‰7å¼ è¡¨åˆ›å»ºæˆåŠŸ
  - [ ] productï¼ˆå•†å“è¡¨ï¼Œå«ä½ç½®å­—æ®µï¼‰
  - [ ] product_categoryï¼ˆåˆ†ç±»è¡¨ï¼‰
  - [ ] shopping_cartï¼ˆè´­ç‰©è½¦è¡¨ï¼‰
  - [ ] customer_orderï¼ˆè®¢å•è¡¨ï¼‰
  - [ ] order_itemï¼ˆè®¢å•æ˜ç»†è¡¨ï¼‰
  - [ ] wishlistï¼ˆå¿ƒæ„¿å•è¡¨ï¼‰
  - [ ] customer_addressï¼ˆæ”¶è´§åœ°å€è¡¨ï¼Œæ–°è¥¿å…°æ ¼å¼ï¼‰
- [ ] ç´¢å¼•åˆ›å»ºæ­£ç¡®
- [ ] æµ‹è¯•æ•°æ®æ’å…¥

### åç«¯API
- [ ] æ‰€æœ‰æ¥å£å¼€å‘å®Œæˆ
- [ ] æ¥å£æµ‹è¯•é€šè¿‡
- [ ] APIæ–‡æ¡£å®Œå–„

### å‰ç«¯é¡µé¢
- [ ] å•†å“åˆ—è¡¨å±•ç¤ºæ­£å¸¸
- [ ] å•†å“è¯¦æƒ…å±•ç¤ºæ­£å¸¸
- [ ] è´­ç‰©è½¦åŠŸèƒ½æ­£å¸¸
- [ ] è®¢å•åŠŸèƒ½æ­£å¸¸
- [ ] å¿ƒæ„¿å•åŠŸèƒ½æ­£å¸¸

### åå°ç®¡ç†
- [ ] å•†å“ç®¡ç†åŠŸèƒ½å®Œæ•´ï¼ˆåˆ—è¡¨ã€æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ã€æ‰¹é‡æ“ä½œï¼‰
- [ ] åˆ†ç±»ç®¡ç†åŠŸèƒ½å®Œæ•´ï¼ˆæ ‘å½¢ç»“æ„ã€å¢åˆ æ”¹ï¼‰
- [ ] **å•†å“ä½ç½®ç®¡ç†åŠŸèƒ½å®Œæ•´** â­ æ–°å¢
  - [ ] é¦–é¡µç²¾é€‰å•†å“ç®¡ç†ï¼ˆæœ€å¤š4ä¸ªï¼‰
  - [ ] ç›¸å…³å•†å“ç®¡ç†ï¼ˆæœ€å¤š4ä¸ªï¼‰
  - [ ] å•†å“åˆ—è¡¨æ’åºç®¡ç†
  - [ ] å•†å“é€‰æ‹©å™¨åŠŸèƒ½æ­£å¸¸
  - [ ] ä½ç½®ä¿å­˜åŠŸèƒ½æ­£å¸¸
- [ ] è®¢å•ç®¡ç†åŠŸèƒ½å®Œæ•´ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€çŠ¶æ€ä¿®æ”¹ã€æ–°è¥¿å…°åœ°å€æ˜¾ç¤ºï¼‰
- [ ] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ­£å¸¸

### æµ‹è¯•
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] å®‰å…¨æµ‹è¯•é€šè¿‡

---

## ğŸ“¸ é™„å½•ï¼šå›¾ç‰‡å°ºå¯¸å®Œæ•´å¯¹ç…§è¡¨

### ç”Ÿæˆçš„å›¾ç‰‡å°ºå¯¸ä¸ç”¨é€”å¯¹ç…§

| å°ºå¯¸åç§° | å°ºå¯¸ï¼ˆå®½xé«˜ï¼‰ | è£å‰ªæ–¹å¼ | è´¨é‡ | ç”¨é€” | å‰ç«¯ä½¿ç”¨ä½ç½® |
|---------|-------------|---------|------|------|------------|
| **original** | åŸå›¾ï¼ˆæœ€å¤§1200pxï¼‰ | ä¿æŒæ¯”ä¾‹ | 90% | åŸå›¾å¤‡ä»½ | - |
| **large_800** | 800x877px | ä¿æŒæ¯”ä¾‹ | 85% | å•†å“ä¸»å›¾ | è¯¦æƒ…é¡µä¸»å›¾ã€åˆ—è¡¨é¡µã€é¦–é¡µFeatured |
| **large_768** | 768x842px | ä¿æŒæ¯”ä¾‹ | 85% | å¤§å±å¹•æ˜¾ç¤º | srcsetä¸­çš„768w |
| **medium_600** | 600x600px | æ­£æ–¹å½¢è£å‰ª | 85% | ä¸­ç­‰å°ºå¯¸ | æ¡Œé¢ç«¯å•†å“åˆ—è¡¨ã€é¦–é¡µ |
| **medium_460** | 460x460px | æ­£æ–¹å½¢è£å‰ª | 85% | å¤‡ç”¨å°ºå¯¸ | å¤‡ç”¨ |
| **small_274** | 274x300px | ä¿æŒæ¯”ä¾‹ | 85% | ç§»åŠ¨ç«¯ | srcsetä¸­çš„274w |
| **thumbnail_150** | 150x150px | æ­£æ–¹å½¢è£å‰ª | 80% | ç¼©ç•¥å›¾ | å¿ƒæ„¿å•ã€è´­ç‰©è½¦ã€æ¯”è¾ƒåˆ—è¡¨ |
| **thumbnail_100** | 100x100px | æ­£æ–¹å½¢è£å‰ª | 80% | å¾®ç¼©å›¾ | è¯¦æƒ…é¡µå·¦ä¾§ç¼©ç•¥å›¾åˆ—è¡¨ |
| **webp_600** | 600x600.webp | æ­£æ–¹å½¢è£å‰ª | 80% | WebPæ ¼å¼ | ç°ä»£æµè§ˆå™¨ï¼ˆä½“ç§¯å°30-50%ï¼‰ |
| **webp_768** | 768x842.webp | ä¿æŒæ¯”ä¾‹ | 80% | WebPæ ¼å¼ | ç°ä»£æµè§ˆå™¨ï¼ˆä½“ç§¯å°30-50%ï¼‰ |

### å‰ç«¯é¡µé¢ä½¿ç”¨åœºæ™¯è¯¦ç»†è¯´æ˜

#### 1. é¦–é¡µï¼ˆindex.htmlï¼‰- Featured ProductsåŒºåŸŸ
```html
<img
  src="large_800"
  srcset="large_800 800w, small_274 274w, large_768 768w"
  sizes="(max-width: 800px) 100vw, 800px"
/>
```
- **ä¸»è¦ä½¿ç”¨**: large_800 (800x877px)
- **å“åº”å¼**: small_274 (ç§»åŠ¨ç«¯), large_768 (å¤§å±å¹•)

#### 2. å•†å“åˆ—è¡¨é¡µï¼ˆshop/index.htmlï¼‰
```html
<img
  src="large_800"
  srcset="large_800 800w, small_274 274w, large_768 768w"
  sizes="(max-width: 800px) 100vw, 800px"
/>
```
- **ä¸»è¦ä½¿ç”¨**: large_800 (800x877px)
- **å“åº”å¼**: small_274 (ç§»åŠ¨ç«¯), large_768 (å¤§å±å¹•)

#### 3. å•†å“è¯¦æƒ…é¡µï¼ˆintelligent-marble-knife/index.htmlï¼‰- ä¸»å›¾åŒºåŸŸ
```html
<img
  src="large_800"
  data-large_image="large_800"
  srcset="large_800 800w, small_274 274w, large_768 768w"
  sizes="(max-width: 800px) 100vw, 800px"
/>
```
- **ä¸»è¦ä½¿ç”¨**: large_800 (800x877px)
- **å“åº”å¼**: small_274 (ç§»åŠ¨ç«¯), large_768 (å¤§å±å¹•)

#### 4. å•†å“è¯¦æƒ…é¡µ - å·¦ä¾§ç¼©ç•¥å›¾åˆ—è¡¨ â­ æ–°å¢
```html
<div
  data-thumb="thumbnail_100"
  data-thumb-srcset="thumbnail_100 100w"
  data-thumb-sizes="(max-width: 109px) 100vw, 109px"
>
```
- **ä¸»è¦ä½¿ç”¨**: thumbnail_100 (100x100px)
- **æ˜¾ç¤ºå°ºå¯¸**: çº¦100-109px

#### 5. å¿ƒæ„¿å•/æ¯”è¾ƒåˆ—è¡¨
```html
<img src="thumbnail_150" />
```
- **ä¸»è¦ä½¿ç”¨**: thumbnail_150 (150x150px)

#### 6. è´­ç‰©è½¦
```html
<img src="thumbnail_150" />
```
- **ä¸»è¦ä½¿ç”¨**: thumbnail_150 (150x150px)

#### 7. åå°ç®¡ç† - å•†å“åˆ—è¡¨
```html
<img src="thumbnail_100" />
```
- **ä¸»è¦ä½¿ç”¨**: thumbnail_100 (100x100px)

### WebPæ ¼å¼ä½¿ç”¨ç¤ºä¾‹

```html
<picture>
  <source
    type="image/webp"
    srcset="webp_600 600w, webp_768 768w"
    sizes="(max-width: 800px) 100vw, 800px"
  />
  <img
    src="large_800"
    srcset="large_800 800w, small_274 274w, large_768 768w"
    sizes="(max-width: 800px) 100vw, 800px"
    alt="Product Image"
    loading="lazy"
  />
</picture>
```

### æ•°æ®åº“å­˜å‚¨ç¤ºä¾‹

**mainImageå­—æ®µ**ï¼ˆTEXTç±»å‹ï¼Œå­˜å‚¨JSONå­—ç¬¦ä¸²ï¼‰ï¼š
```json
{
  "original": "uploads/product/202411/abc123.jpg",
  "large_800": "uploads/product/202411/abc123_800x877.jpg",
  "large_768": "uploads/product/202411/abc123_768x842.jpg",
  "medium_600": "uploads/product/202411/abc123_600x600.jpg",
  "medium_460": "uploads/product/202411/abc123_460x460.jpg",
  "small_274": "uploads/product/202411/abc123_274x300.jpg",
  "thumbnail_150": "uploads/product/202411/abc123_150x150.jpg",
  "thumbnail_100": "uploads/product/202411/abc123_100x100.jpg",
  "webp_600": "uploads/product/202411/abc123_600x600.webp",
  "webp_768": "uploads/product/202411/abc123_768x842.webp"
}
```

**imageså­—æ®µ**ï¼ˆTEXTç±»å‹ï¼Œå­˜å‚¨JSONæ•°ç»„å­—ç¬¦ä¸²ï¼‰ï¼š
```json
[
  {
    "original": "uploads/product/202411/def456.jpg",
    "large_800": "uploads/product/202411/def456_800x877.jpg",
    "large_768": "uploads/product/202411/def456_768x842.jpg",
    "medium_600": "uploads/product/202411/def456_600x600.jpg",
    "medium_460": "uploads/product/202411/def456_460x460.jpg",
    "small_274": "uploads/product/202411/def456_274x300.jpg",
    "thumbnail_150": "uploads/product/202411/def456_150x150.jpg",
    "thumbnail_100": "uploads/product/202411/def456_100x100.jpg",
    "webp_600": "uploads/product/202411/def456_600x600.webp",
    "webp_768": "uploads/product/202411/def456_768x842.webp"
  },
  {
    "original": "uploads/product/202411/ghi789.jpg",
    ...
  }
]
```

### æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ç»“æ„

```
static/upload/product/
â”œâ”€â”€ 202411/
â”‚   â”œâ”€â”€ abc123.jpg                    (åŸå›¾)
â”‚   â”œâ”€â”€ abc123_800x877.jpg            (large_800)
â”‚   â”œâ”€â”€ abc123_768x842.jpg            (large_768)
â”‚   â”œâ”€â”€ abc123_600x600.jpg            (medium_600)
â”‚   â”œâ”€â”€ abc123_460x460.jpg            (medium_460)
â”‚   â”œâ”€â”€ abc123_274x300.jpg            (small_274)
â”‚   â”œâ”€â”€ abc123_150x150.jpg            (thumbnail_150)
â”‚   â”œâ”€â”€ abc123_100x100.jpg            (thumbnail_100)
â”‚   â”œâ”€â”€ abc123_600x600.webp           (webp_600)
â”‚   â””â”€â”€ abc123_768x842.webp           (webp_768)
â”œâ”€â”€ 202412/
â”‚   â””â”€â”€ ...
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ä½¿ç”¨WebPæ ¼å¼**ï¼šä½“ç§¯å‡å°‘30-50%ï¼ŒåŠ è½½é€Ÿåº¦æ›´å¿«
2. **å¯ç”¨æ‡’åŠ è½½**ï¼š`loading="lazy"` å±æ€§ï¼Œå»¶è¿ŸåŠ è½½å±å¹•å¤–å›¾ç‰‡
3. **ä½¿ç”¨CDN**ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨CDNåŠ é€Ÿå›¾ç‰‡åŠ è½½
4. **å“åº”å¼åŠ è½½**ï¼šæ ¹æ®è®¾å¤‡å±å¹•å°ºå¯¸åŠ è½½åˆé€‚çš„å›¾ç‰‡
5. **å›¾ç‰‡å‹ç¼©**ï¼šè´¨é‡80-85%å³å¯ï¼Œè‚‰çœ¼å‡ ä¹æ— å·®åˆ«
6. **ç¼“å­˜ç­–ç•¥**ï¼šè®¾ç½®åˆç†çš„æµè§ˆå™¨ç¼“å­˜æ—¶é—´

---

**é¢„è®¡æ€»å·¥æ—¶ï¼š** 9-13å¤©
**ä¼˜å…ˆçº§ï¼š** é«˜
**é£é™©è¯„ä¼°ï¼š** ä¸­ç­‰

